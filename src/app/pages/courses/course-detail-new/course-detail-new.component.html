<vex-secondary-toolbar current>
  <vex-breadcrumbs [crumbs]="[
    {icon:'cursos'},
    {text:'courses.title', title: true, link: '/courses'},
    {text: id, subtitle: true}
  ]" class="flex"></vex-breadcrumbs>
</vex-secondary-toolbar>

<div [@stagger]="true" class="p-gutter container" style="max-width: none;">
  <div class="flex flex-col sm:flex-row gap-4"
    style="width: 100%; float: left; padding: 2%">
    <div @fadeInUp class="card flex-auto">
      <mat-tab-group class="tabsWrapper">
        <mat-tab label="{{'course' | translate}}">
          <mat-spinner *ngIf="loading" style="margin: 0 auto"></mat-spinner>
          <mat-card style="padding: 3% 5% 0 5%;" *ngIf="!loading">
            <mat-card-header style="display: block;">
              <div style="float: left; width: 100%;">
                <div style="float: left; width: 50%;">
                  <div style="float: left; margin-right: 2%;">
                    <img
                      [src]="'https://school.boukii.com/assets/icons/collectif_' + course?.sport?.name.toLowerCase() + '2x.png'"
                      width="100" height="100" *ngIf="course.course_type === 1">
                    <img
                      [src]="'https://school.boukii.com/assets/icons/prive_' + course?.sport?.name.toLowerCase() + '2x.png'"
                      width="100" height="100" *ngIf="course.course_type === 2">
                  </div>
                  <div style="float: left; width: 75%;">
                    <p><strong>{{courseName}}</strong></p>
                    <p>{{course.course_type === 1 ? 'Collectif' : 'Privee'}}
                      {{course?.sport?.name}}</p>
                    <p>{{course?.station?.name}}</p>
                  </div>
                  <div style="float: right; cursor: pointer;"
                    (click)="goTo('/courses/update/' + id)">
                    <i class="fa fa-edit"
                      style="color: #ff3085; font-size: 30px;"></i>
                  </div>
                </div>
                <div style="float: left; width: 50%;">
                  <div style="float: right; width: 100%;">
                    <div style="float: right; margin: 0 0 0 25px;">
                      <mat-slide-toggle [checked]="course?.options"
                        [disabled]="true">{{'options' |
                        translate}}</mat-slide-toggle>
                    </div>
                    <div style="float: right; margin: 0;">
                      <mat-slide-toggle [checked]="course?.online"
                        [disabled]="true">Online</mat-slide-toggle>
                    </div>
                    <div style="float: right; margin: 0 25px 0 0;">
                      <mat-slide-toggle [checked]="course?.active"
                        [disabled]="true">{{'status' |
                        translate}}</mat-slide-toggle>
                    </div>
                  </div>
                </div>
              </div>
            </mat-card-header>
            <mat-card-content>
              <div style="float: left; width: 47%; margin: 2% 3% 0 0;">
                <img
                  [src]="course.image ? course.image : '../../../../assets/img/defult.jpg'">
                <ul style="margin: 2% 0 0 0;" *ngIf="course.course_type === 2">
                  <li style="margin: 0 0 2% 0"><strong>{{'dates' |
                      translate}}</strong></li>
                  <li>{{parseDateToDay(course.course_dates[0].date,
                    'YYYY-MM-DD', 'dddd')}},
                    {{parseDateToDay(course.course_dates[0].date, 'YYYY-MM-DD',
                    'LL')}}
                    <i
                      style="text-align: right; float: right;">{{parseDateToDay(course.course_dates[0].hour_start,
                      'HH:mm:ss', 'HH:mm')}}h -
                      {{parseDateToDay(course.course_dates[0].hour_end,
                      'HH:mm:ss', 'HH:mm')}}h</i>
                  </li>
                  <li>{{parseDateToDay(course.course_dates[course.course_dates.length
                    - 1].date, 'YYYY-MM-DD', 'dddd')}},
                    {{parseDateToDay(course.course_dates[course.course_dates.length
                    - 1].date, 'YYYY-MM-DD', 'LL')}}
                    <i
                      style="text-align: right; float: right;">{{parseDateToDay(course.course_dates[course.course_dates.length
                      - 1].hour_start, 'HH:mm:ss', 'HH:mm')}}h -
                      {{parseDateToDay(course.course_dates[course.course_dates.length
                      - 1].hour_end, 'HH:mm:ss', 'HH:mm')}}h</i>
                  </li>
                </ul>
                <ul style="margin: 2% 0 0 0;" *ngIf="course.course_type === 1">
                  <li style="margin: 0 0 2% 0"><strong>{{'dates' |
                      translate}}</strong></li>
                  <li
                    *ngFor="let item of course.course_dates">{{parseDateToDay(item.date,
                    'YYYY-MM-DD', 'dddd')}}, {{parseDateToDay(item.date,
                    'YYYY-MM-DD', 'LL')}}
                    <i
                      style="text-align: right; float: right;">{{parseDateToDay(item.hour_start,
                      'HH:mm:ss', 'HH:mm')}}h - {{parseDateToDay(item.hour_end,
                      'HH:mm:ss', 'HH:mm')}}h</i>
                  </li>
                </ul>
              </div>
              <div style="width: 50%; margin-top: 2%; float: left;">
                <div style="width: 100%;">
                  <p
                    style="float: left; width: 80%; text-align: left;"><b>{{'summary'
                      | translate}}</b></p>
                  <p
                    style="float: left; width: 20%; text-align: right;"><b>{{'price'
                      | translate}}</b></p>
                </div>
                <div style="width: 100%;">
                  <p style="float: left; width: 50%; text-align: left;"
                    [innerHTML]="shortDescription"></p>
                  <p
                    style="float: left; width: 50%; text-align: right; color: #ff3085"
                    *ngIf="course.course_type === 1 || (course.course_type === 2 && !course.is_flexible)">
                    <b>{{course.price}}</b> {{course.currency}}
                  </p>
                  <p
                    style="float: left; width: 50%; text-align: right; color: #ff3085"
                    *ngIf="course.course_type === 2 && course.is_flexible">
                    <b>{{'from' | translate }} {{firstCombinationValue}}</b>
                    {{course.currency}}
                  </p>
                </div>
              </div>
              <div style="width: 50%; margin-top: 2%; float: left;">
                <div style="width: 100%;">
                  <p
                    style="float: left; width: 80%; text-align: left;"><b>{{'courses.desc'
                      | translate}}</b></p>
                  <p
                    style="float: left; width: 20%; text-align: right;"><b>{{'age'
                      | translate}}</b></p>
                </div>
                <div style="width: 100%;">
                  <p style="float: left; width: 50%; text-align: left;"
                    [innerHTML]="description"></p>
                  <p style="float: left; width: 50%; text-align: right;"
                    *ngIf="course.course_type === 2">
                    {{'from' | translate}} {{course.age_min}} {{'to' |
                    translate}} {{course.age_max}} {{'years' | translate}}
                  </p>
                  <p style="float: left; width: 50%; text-align: right;"
                    *ngIf="course.course_type === 1">
                    {{'from' | translate}} {{ageRange.age_min}} {{'to' |
                    translate}} {{ageRange.age_max}} {{'years' | translate}}
                  </p>
                </div>
              </div>
              <div style="width: 50%; margin-top: 2%; float: left;">
                <div class="flex flex-col sm:flex-row gap-2 sm:gap-6">
                  <div class="flex-auto">
                    <label for="dateFrom">{{'courses.date_reservable' |
                      translate}}</label>
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input matInput id="dateFrom"
                        [value]="course.date_start_res | date: 'dd/MM/YYYY'"
                        [readonly]="true">
                    </mat-form-field>
                  </div>
                  <div class="flex-auto">
                    <label for="dateTo">{{'courses.date_reservable_to' |
                      translate}}</label>
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input matInput id="dateTo"
                        [value]="course.date_end_res | date: 'dd/MM/YYYY'"
                        [readonly]="true">
                    </mat-form-field>
                  </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-2 sm:gap-6">
                  <div class="flex-auto" style="width: 50%; float: left;">
                    <label for="duration">{{'duration' | translate}}</label>
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input id="duration" matInput required type="text"
                        placeholder="{{'duration' | translate}}"
                        [value]="shortestDuration" [readonly]="true">
                    </mat-form-field>
                  </div>
                  <div class="flex-auto" style="width: 50%; float: left;">
                    <label for="participants">{{'max_pax' | translate}}</label>
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <mat-label>{{'max_pax' | translate}}</mat-label>
                      <input id="participants" matInput required type="number"
                        [value]="course.max_participants" [readonly]="true">
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </mat-tab>
        <mat-tab label="{{'bookings' | translate}}">

        </mat-tab>
        <mat-tab label="{{'menu.stats' | translate}}">

        </mat-tab>

      </mat-tab-group>
    </div>
  </div>
</div>
