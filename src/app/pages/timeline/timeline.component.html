<vex-page-layout>

    <vex-secondary-toolbar>
      <vex-breadcrumbs [crumbs]="['Timeline', 'List']" class="flex-auto"></vex-breadcrumbs>
  
      <button class="ml-2" color="primary" mat-icon-button type="button">
        <mat-icon svgIcon="mat:more_vert"></mat-icon>
      </button>
    </vex-secondary-toolbar>
    <vex-page-layout-content class="-mt-6 fullwidth">

        <div class="header-navigation">
            <div class="date-navigation">
              <span *ngIf="timelineView == 'day'">{{ currentDate | date: 'longDate' }}</span>
              <span *ngIf="timelineView == 'week'">{{ currentWeek }}</span>
              <span *ngIf="timelineView == 'month'">{{ currentMonth }}</span>
              <button (click)="goToPrevious()">&lt;</button>
              <button (click)="goToNext()">&gt;</button>
            </div>
            
            <div class="view-selection">
                <span class="view-option" [ngClass]="{'selected': timelineView == 'day'}" (click)="changeView('day')">Jour</span>
                <span class="view-option" [ngClass]="{'selected': timelineView == 'week'}" (click)="changeView('week')">Semaine</span>
                <span class="view-option" [ngClass]="{'selected': timelineView == 'month'}" (click)="changeView('month')">Mois</span>
            </div>
        </div>
        
        <div>

            <div class="schedule-container" *ngIf="timelineView != 'month'">
                <div class="monitors-column">
                  <div class="monitor" *ngFor="let monitor of monitors">
                    <div class="monitor-left">
                        <img src="assets/img/icons/user-photo.png" class="monitor-img" />
                        <div class="monitor-text">
                            <div class="monitor-lang">
                                FR 路 EN 路 ES
                            </div>
                            <div class="monitor-title">
                                {{ monitor.name }}
                            </div>
                            <div class="monitor-icons">
                                <img src="assets/img/icons/icon-message-grey.png" />
                                <img src="assets/img/icons/icon-mail-grey.png" />
                                <img src="assets/img/icons/icon-phone-grey.png" />
                                <img src="assets/img/icons/icon-calendar-grey.png" />
                            </div>
                        </div>
                    </div>
                    <div class="monitor-right">
                        <div class="monitor-sport">
                            <img src="assets/img/icons/icon-ski-box.png" />
                            <div>Ski</div>
                        </div>
                        <div class="monitor-sport">
                            <img src="assets/img/icons/icon-ski-box.png" />
                            <div>Snow</div>
                        </div>
                    </div>
                  </div>
                </div>
                <div class="hours-container">
                  <div class="hours-row" *ngIf="timelineView == 'day'">
                    <div class="hour" *ngFor="let hour of hoursRange">{{ hour }}</div>
                  </div>
                  <div class="hours-row" *ngIf="timelineView == 'week'">
                    <div class="day" *ngFor="let day of weekDays">{{ day }}</div>
                  </div>
                  <div class="grid-container">
                    <div class="grid-row" *ngFor="let monitor of monitors;let monitorIndex = index">
                        <ng-container *ngIf="timelineView == 'day'">
                            <div class="grid-cell" *ngFor="let hour of hoursRange">
                                <div *ngIf="monitorIndex % 5 === 0  && monitorIndex !== 0" class="hour-day-scroll">{{ hour }}</div>
                            </div>
                        </ng-container>
                        <ng-container *ngIf="timelineView == 'week'">
                            <div class="grid-cell-day" *ngFor="let day of weekDays">
                                <div class="grid-cell-inside" *ngFor="let hour of hoursRange"></div>
                                <div *ngIf="monitorIndex % 5 === 0  && monitorIndex !== 0" class="hour-day-scroll">{{ day }}</div>
                            </div>
                        </ng-container>
                    </div>

                    <!--TASKS-->
                    <ng-container *ngFor="let task of filteredTasks">
                        <!--DAY-->
                        <div *ngIf="timelineView == 'day'" class="task-wrapper" [ngClass]="task.class" [ngStyle]="task.style">
                            <div class="task-text">
                                <!--<img />-->
                                <div>{{ task.title }}</div>
                            </div>
                            <div *ngIf="task.type=='collective' || task.type=='private'" class="task-blocks">
                                <div class="task-block-level">DKV 1</div>
                                <div class="task-block-people">8/10</div>
                            </div>
                        </div>
                        <!--WEEK-->
                        <div *ngIf="timelineView == 'week'" class="task-wrapper-week" [ngClass]="task.class" [ngStyle]="task.styleWeek">
                            <div *ngIf="task.type=='collective' || task.type=='private'" class="task-blocks-week">
                                <div class="task-block-level-week">DKV 1</div>
                                <div class="task-block-people-week">8/10</div>
                            </div>
                        </div>
                    </ng-container>

                  </div>
                </div>
              </div>


            <div class="schedule-container" *ngIf="timelineView == 'month'">
                <div class="monitors-column">
                  <ng-container *ngFor="let monitor of monitors; let monitorIndex = index">
                    <ng-container *ngFor="let week of weeksInMonth; let weekIndex = index">
                        <div class="monitor" [ngClass]="{'big-border': weekIndex === 0 && monitorIndex !== 0}">
                            <ng-container *ngIf="weekIndex === 0">
                                <div class="monitor-left">
                                    <img src="assets/img/icons/user-photo.png" class="monitor-img" />
                                    <div class="monitor-text">
                                        <div class="monitor-lang">
                                            FR 路 EN 路 ES
                                        </div>
                                        <div class="monitor-title">
                                            {{ monitor.name }}
                                        </div>
                                        <div class="monitor-icons">
                                            <img src="assets/img/icons/icon-message-grey.png" />
                                            <img src="assets/img/icons/icon-mail-grey.png" />
                                            <img src="assets/img/icons/icon-phone-grey.png" />
                                            <img src="assets/img/icons/icon-calendar-grey.png" />
                                        </div>
                                    </div>
                                </div>
                                <div class="monitor-right">
                                    <div class="monitor-sport">
                                        <img src="assets/img/icons/icon-ski-box.png" />
                                        <div>Ski</div>
                                    </div>
                                    <div class="monitor-sport">
                                        <img src="assets/img/icons/icon-ski-box.png" />
                                        <div>Snow</div>
                                    </div>
                                </div>
                            </ng-container>

                            <div class="day-start-week">
                                {{ week.startDay }}
                            </div>
                            <div class="day-end-week">
                                {{ week.endDay }}
                            </div>

                        </div>
                    </ng-container>
                  </ng-container>
                </div>
                <div class="hours-container">
                  <div class="hours-row">
                    <div class="day" *ngFor="let day of weekDays">{{ day }}</div>
                  </div>
                  <div class="grid-container">
                    <ng-container *ngFor="let monitor of monitors; let monitorIndex = index">
                        <div class="grid-row" *ngFor="let week of weeksInMonth;let weekIndex = index">
                            <div class="grid-cell-day" *ngFor="let day of weekDays;let dayIndex = index" [ngClass]="{'outside-month': !isDayInMonth(dayIndex, weekIndex),'big-border': weekIndex === 0 && monitorIndex !== 0}">
                                <div class="grid-cell-inside" *ngFor="let hour of hoursRange"></div>
                                <div *ngIf="weekIndex === 0 && monitorIndex !== 0" class="hour-day-scroll">{{ day }}</div>
                            </div>
                        </div>
                    </ng-container>

                    <!--TASKS-->
                    <ng-container *ngFor="let task of filteredTasks">
                        <!--MONTH-->
                        <div class="task-wrapper-week" [ngClass]="task.class" [ngStyle]="task.styleMonth">
                            <div *ngIf="task.type=='collective' || task.type=='private'" class="task-blocks-week">
                                <div class="task-block-level-week">DKV 1</div>
                                <div class="task-block-people-week">8/10</div>
                            </div>
                        </div>
                    </ng-container>

                  </div>
                </div>
              </div>
              
              

    </div>
          


    </vex-page-layout-content>
  
  </vex-page-layout>
  