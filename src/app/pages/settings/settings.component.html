<vex-page-layout mode="card">

  <vex-page-layout-header class="flex flex-col items-start justify-center" style="background-color: #ececec;">
    <div class="container" style="max-width: none;">
      <i class="fa fa-cog" style="float: left;font-size: 30px;margin: 0 10px 0 0;color: #f53d7c;"></i>
      <h2 class="title m-0" style="float: left;font-size: 30px;">Reglajes</h2>
    </div>
  </vex-page-layout-header>

  <vex-page-layout-content class="container" style="max-width: none !important;">
    <div class="card">
      <mat-tab-group>
        <mat-tab label="Temporada" [formGroup]="seasonForm">

          <vex-page-layout>
            <vex-page-layout-content class="-mt-6 fullwidth" style="margin: 1% 0 0 0">
              <h1 style="color:#808080;font-size:24px">Nueva Temporada</h1>
              <p style="padding: 1%; color:#808080">Gracias a las múltiples opciones configurables y otros servicios, tu escuela podrá aportar a sus clientes un gran valor añadido.</p>
              <div style="width: 100%; float: left;padding: 1%">
                <div style="padding: 1%;width: 100%;float: left;border: #e6e6e6 1px solid;">
                  <p style="font-weight: bold; color:#808080">Datos generales</p>
                </div>
                <div style="width: 100%; float: left; border:#e6e6e6 1px solid;padding: 1%;">
                  <div class="flex flex-col sm:flex-row gap-2 sm:gap-6" >

                    <div class="flex-auto">
                      <label for="dateFrom">Inicio de temporada</label>
                      <mat-form-field style="width: 100%">

                        <input matInput id="dateFrom" [matDatepicker]="pickerFrom" formControlName="fromDate" [max]="today">
                        <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
                        <mat-datepicker #pickerFrom [startAt]="today"></mat-datepicker>
                      </mat-form-field>
                    </div>
                    <div class="flex-auto">
                      <label for="dateTo">Fin de temporada</label>

                      <mat-form-field style="width: 100%">

                        <input matInput id="dateFrom" [matDatepicker]="pickerTo" formControlName="toDate" [max]="today">
                        <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
                        <mat-datepicker #pickerTo [startAt]="today"></mat-datepicker>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="flex flex-col sm:flex-row gap-2 sm:gap-6" >

                    <div class="flex-auto">
                      <label for="hour">Hora de inicio de cursos</label>
                      <mat-form-field style="width: 100%;">
                        <input id="hour" type="text" placeholder="Hora" matInput [matAutocomplete]="matHourFrom" [(ngModel)]="selectedFromHour">
                        <mat-autocomplete #matHourFrom="matAutocomplete">
                          <mat-option *ngFor="let hour of hours" [value]="hour">
                            {{hour}}
                          </mat-option>
                        </mat-autocomplete>
                      </mat-form-field>
                    </div>

                    <div class="flex-auto">
                      <label for="hour">Hora de fin de crusos</label>
                      <mat-form-field style="width: 100%;">
                        <input id="hour" type="text" placeholder="Hora" matInput [matAutocomplete]="matHourTo" [(ngModel)]="selectedToHour">
                        <mat-autocomplete #matHourTo="matAutocomplete">
                          <mat-option *ngFor="let hour of hours" [value]="hour">
                            {{hour}}
                          </mat-option>
                        </mat-autocomplete>
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="flex flex-col sm:flex-row gap-2 sm:gap-6" >

                    <div class="flex-auto">
                      <label for="holidays">Dias festivos</label>
                      <mat-form-field style="width: 100%">

                        <input matInput id="holidays" [matDatepicker]="pickerHoliday" formControlName="holidays" [max]="today">
                        <mat-datepicker-toggle matSuffix [for]="pickerHoliday"></mat-datepicker-toggle>
                        <mat-datepicker #pickerHoliday [startAt]="today"></mat-datepicker>
                      </mat-form-field>
                    </div>
                    <!-- añadir boton + para poder meter mas dias festivos-->
                  </div>
                </div>
              </div>

              <div style="width: 100%; float: left;padding: 1%">
                <div style="padding: 1%;width: 100%;float: left;border: #e6e6e6 1px solid;">
                  <p style="font-weight: bold; color:#808080">Datos (Para emails)</p>
                </div>
                <div style="width: 100%; float: left; border:#e6e6e6 1px solid;padding: 1%;">
                  <div class="flex flex-col sm:flex-row gap-2 sm:gap-6">
                    <mat-form-field class="flex-auto">
                      <mat-label>Calle</mat-label>

                      <input formControlName="street" matInput required type="text">
                    </mat-form-field>

                    <mat-form-field class="flex-auto">
                      <mat-label>Nº</mat-label>
                      <input formControlName="number" matInput required type="text">

                    </mat-form-field>
                  </div>
                  <div class="flex flex-col sm:flex-row gap-2 sm:gap-6">
                    <mat-form-field class="flex-auto">
                      <mat-label>CP</mat-label>

                      <input formControlName="postalCode" matInput required type="text">
                    </mat-form-field>

                    <mat-form-field class="flex-auto">
                      <mat-label>Teléfono</mat-label>
                      <input formControlName="phone" matInput required type="tel">

                    </mat-form-field>
                  </div>
                  <div class="flex flex-col sm:flex-row gap-2 sm:gap-6">
                    <mat-form-field class="vex-flex-form-field flex-auto">
                      <mat-label>Pays</mat-label>
                      <input type="text" placeholder="Selecciona una opción" matInput [formControl]="myControlCountries" [matAutocomplete]="autoCountry" formControlName="country">
                      <mat-autocomplete #autoCountry="matAutocomplete" [displayWith]="displayFnCountry">
                        <mat-option *ngFor="let country of filteredCountries | async" [value]="country">
                          {{country.name}}
                        </mat-option>
                      </mat-autocomplete>
                    </mat-form-field>

                    <mat-form-field class="vex-flex-form-field flex-auto">
                      <mat-label>Canton</mat-label>
                      <input type="text" placeholder="Selecciona una opción" matInput [formControl]="myControlProvinces" [matAutocomplete]="autoProvince" formControlName="province">
                      <mat-autocomplete #autoProvince="matAutocomplete" [displayWith]="displayFnProvince">
                        <mat-option *ngFor="let province of filteredProvinces | async" [value]="province">
                          {{province.name}}
                        </mat-option>
                      </mat-autocomplete>
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </vex-page-layout-content>
          </vex-page-layout>
        </mat-tab>
        <mat-tab label="Sports">
          <mat-tab-group>
            <mat-tab label="Deportes Activos">
              <vex-page-layout>
                <vex-page-layout-content class="-mt-6 fullwidth" style="margin: 1% 0 0 0">
                  <div style="float: left; width: 100%;">
                    <h1 style="color:#808080;font-size:24px;float: left; width: 100%;">Deportes activos</h1>
                    <p style="padding: 1%; color:#808080;float: left; width: 75%;">
                      Selecciona los deportes de tu escuela.<br>
                      No es necesario que los selecciones todos ahora, podrás hacerlo mas adelante según las necesidades
                    </p>
                    <button mat-raised-button color="accent" style="color: #fff;background: #f53d7c;padding: 1%;width: 15%;">Guardar Cambios</button>

                  </div>
                  <div style="float: left; width: 100%;padding: 0 5% 5% 3%;">
                    <p style="padding: 2%;font-size: 30px;font-weight: bold;color: #808080;">Invierno</p>
                    <ng-container *ngFor="let item of mockSportData">
                      <div style="float: left; width: 5%; margin: 0 0 1% 6%;"*ngIf="item.sport_type === 1">

                        <div style="float: left; width: 100%; background: #e6e6e6; border-radius: 10px;border: solid 1px #808080" *ngIf="item.sport_type === 1">
                          <div style="float: left; width: 100%;">
                            <img style="float: left; width: 100%;" [src]="item.icon"/>
                          </div>
                        </div>

                        <div style="float: left; width: 100%; text-wrap: nowrap;" *ngIf="item.sport_type === 1">
                          <p style="float: left; width: 100%;text-align: center;">{{ item.name }}</p>
                        </div>
                      </div>
                    </ng-container>
                  </div>

                  <div style="float: left; width: 100%;padding: 0 5% 5% 3%;">
                    <p style="padding: 2%;font-size: 30px;font-weight: bold;color: #808080;">Verano</p>
                    <ng-container *ngFor="let item of mockSportData">
                      <div style="float: left; width: 5%; margin: 0 0 1% 6%;" *ngIf="item.sport_type === 2">

                        <div style="float: left; width: 100%; background: #e6e6e6; border-radius: 10px;border: solid 1px #808080" *ngIf="item.sport_type === 2">
                          <div style="float: left; width: 100%;">
                            <img style="float: left; width: 100%;" [src]="item.icon"/>
                          </div>
                        </div>

                        <div style="float: left; width: 100%; text-wrap: nowrap;" *ngIf="item.sport_type === 2">
                          <p style="float: left; width: 100%;text-align: center;">{{ item.name }}</p>
                        </div>
                      </div>
                    </ng-container>
                  </div>

                  <div style="float: left; width: 100%;padding: 0 5% 5% 3%;">

                    <p style="padding: 2%;font-size: 30px;font-weight: bold;color: #808080;">All sessions</p>
                    <ng-container *ngFor="let item of mockSportData">
                      <div style="float: left; width: 5%; margin: 0 0 1% 6%;">

                        <div style="float: left; width: 100%; background: #e6e6e6; border-radius: 10px;border: solid 1px #808080">
                          <div style="float: left; width: 100%;">
                            <img style="float: left; width: 100%;" [src]="item.icon"/>
                          </div>
                        </div>

                        <div style="float: left; width: 100%; text-wrap: nowrap;">
                          <p style="float: left; width: 100%;text-align: center;">{{ item.name }}</p>
                        </div>
                      </div>
                    </ng-container>
                  </div>

                </vex-page-layout-content>
              </vex-page-layout>
            </mat-tab>
            <mat-tab label="Niveles">
              <vex-page-layout>
                <vex-page-layout-content class="-mt-6 fullwidth" style="margin: 1% 0 0 0">
                  <div style="float: left; width: 100%;border: 1px solid #e6e6e6;padding: 1%;margin: 0 0 2% 0;">
                    <h1 style="color:#808080;font-size:24px;float: left; width: 100%;">Niveles</h1>
                    <p style="padding: 1%; color:#808080;float: left; width: 75%;">
                      Configura los noveles como mejor se adapten a tu escuela.<br>
                      Los colores son fijos, no se pueden modificar.<br>
                      Recuerda que los hemos clasificado de menor a mayor, siendo el verde el nivel más bajo.
                    </p>
                    <button mat-raised-button color="accent" style="color: #fff;background: #f53d7c;padding: 1%;width: 15%;">Guardar Cambios</button>

                  </div>

                  <div style="float: left; width: 100%;padding: 0 5% 5% 3%;">
                    <ng-container *ngFor="let item of mockSportData; let i = index">
                      <div
                      style="float: left; width: 5%;margin-left: 6%"
                      *ngIf="item.sport_type === 1">
                      <!-- Contenido del div -->
                        <div style="float: left; width: 100%; background: #e6e6e6; border-radius: 10px;border: solid 1px #808080" *ngIf="item.sport_type === 1">
                          <div style="float: left; width: 100%;">
                            <img style="float: left; width: 100%;" [src]="item.icon"/>
                          </div>
                        </div>

                        <div style="float: left; width: 100%; text-wrap: nowrap;" *ngIf="item.sport_type === 1">
                          <p style="float: left; width: 100%;text-align: center;">{{ item.name }}</p>
                        </div>
                      </div>
                    </ng-container>
                  </div>

                  <div style="float: left; width: 100%;padding: 0 5% 5% 3%;">
                    <!-- añadir mat table de niveles
                    <table #reductionTable id="table-level" mat-table [dataSource]="dataSourceLevels" matSort style="border: 1px solid #e6e6e6">

                      <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Id </th>
                        <td mat-cell *matCellDef="let element"> {{element.Id}} </td>
                      </ng-container>

                      <ng-container matColumnDef="edit">
                        <th mat-header-cell *matHeaderCellDef>  </th>
                        <td mat-cell *matCellDef="let element; let idx = index">
                          <mat-icon svgIcon="mat:edit" (click)="editGoal(element, idx)"></mat-icon>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="displayedLevelsColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedLevelsColumns;"></tr>
                    </table>-->
                  </div>
                </vex-page-layout-content>
              </vex-page-layout>
            </mat-tab>
          </mat-tab-group>

        </mat-tab>
        <mat-tab label="Niveaux">
          <div class="p-6">
            <mat-tab-group>
              <mat-tab label="SKi">
                <div
                @stagger
                class="overflow-y-auto flex-auto">
                  <div
                    class="p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 container">
                    <ng-container *ngFor="let level of mockLevelData">
                      <vex-widget-sports-level [level]="level"></vex-widget-sports-level>
                    </ng-container>
                  </div>
                </div>
              </mat-tab>
              <mat-tab label="Snowboard">
                <div
                @stagger
                class="overflow-y-auto flex-auto">
                  <div
                    class="p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 container">
                    <ng-container *ngFor="let level of mockLevelData">
                      <vex-widget-sports-level [level]="level"></vex-widget-sports-level>
                    </ng-container>
                  </div>
                </div>
              </mat-tab>
              <mat-tab label="Ski De Randonné">
                <div
                @stagger
                class="overflow-y-auto flex-auto">
                  <div
                    class="p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 container">
                    <ng-container *ngFor="let level of mockLevelData">
                      <vex-widget-sports-level [level]="level"></vex-widget-sports-level>
                    </ng-container>
                  </div>
                </div>
              </mat-tab>
              <mat-tab label="Raquettes De Neige">
                <div
                @stagger
                class="overflow-y-auto flex-auto">
                  <div
                    class="p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 container">
                    <ng-container *ngFor="let level of mockLevelData">
                      <vex-widget-sports-level [level]="level"></vex-widget-sports-level>
                    </ng-container>
                  </div>
                </div>
              </mat-tab>
              <mat-tab label="VTT">
                <div
                @stagger
                class="overflow-y-auto flex-auto">
                  <div
                    class="p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 container">
                    <ng-container *ngFor="let level of mockLevelData">
                      <vex-widget-sports-level [level]="level"></vex-widget-sports-level>
                    </ng-container>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </mat-tab>
        <mat-tab label="Blocage">
          <div class="p-6">
            <mat-form-field class="flex-auto" *ngFor="let item of mockBlockageData" style="width: 30%; margin: 0 2% 0 0">
              <span matPrefix class="square-prefix" [ngStyle]="{'background-color': item.color}"></span>
              <input matInput placeholder="Enter text" [value]="item.name" [(ngModel)]="item.name">
            </mat-form-field>
          </div>
        </mat-tab>
        <mat-tab label="Durée flexible">
          <div class="p-6">

            <mat-form-field class="flex-auto">
              <input matInput placeholder="Enter people number" type="number" [value]="people" [(ngModel)]="people" (ngModelChange)="updateTable()">
            </mat-form-field>

            <div class="table-container" >
              <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" #scrollContainer>
                <caption>Price in CFH</caption>

                <!-- Intervalo Column -->
                <ng-container matColumnDef="intervalo">
                  <th mat-header-cell *matHeaderCellDef> Intervalo </th>
                  <td mat-cell *matCellDef="let row"> {{row.intervalo}} </td>
                </ng-container>

                <!-- Personas Columns -->
                <ng-container *ngFor="let col of displayedColumns.slice(1)" [matColumnDef]="col">
                  <th mat-header-cell *matHeaderCellDef> {{col}} </th>
                  <td mat-cell *matCellDef="let row">
                    <mat-form-field class="flex-auto">
                      <input class="flex-auto" matInput [(ngModel)]="row[col]" style="margin-top:3%">
                    </mat-form-field>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </div>
          </div>
        </mat-tab>

      </mat-tab-group>
    </div>
  </vex-page-layout-content>

</vex-page-layout>
