<div class="client-form-container" [class.readonly]="readonly">
  <!-- Loading Overlay -->
  <div class="loading-overlay" *ngIf="isLoading" @fadeInOut>
    <mat-spinner diameter="50"></mat-spinner>
    <p>{{ 'client_form.loading' | translate }}</p>
  </div>

  <!-- Form Header -->
  <div class="form-header">
    <div class="header-content">
      <h1 class="form-title">
        <mat-icon>{{ isEditMode ? 'edit' : 'person_add' }}</mat-icon>
        {{ isEditMode ? ('client_form.edit_client' | translate) : ('client_form.new_client' | translate) }}
      </h1>
      <div class="form-progress">
        <mat-progress-bar mode="determinate" [value]="getFormProgress()"></mat-progress-bar>
        <span class="progress-text">{{ getFormProgress() }}% {{ 'client_form.complete' | translate }}</span>
      </div>
    </div>
  </div>

  <!-- Step Navigation -->
  <div class="step-navigation">
    <div class="steps-container">
      <div 
        *ngFor="let step of steps; let i = index" 
        class="step-item"
        [class.active]="currentStep === step.key"
        [class.completed]="isStepCompleted(step.key)"
        [class.valid]="isStepValid(step.key)"
        [class.clickable]="canNavigateToStep(step.key)"
        (click)="navigateToStep(step.key)"
      >
        <div class="step-circle">
          <mat-icon *ngIf="isStepCompleted(step.key)">check</mat-icon>
          <mat-icon *ngIf="!isStepCompleted(step.key)">{{ getStepIcon(step.key) }}</mat-icon>
        </div>
        <div class="step-label">
          <span class="step-number">{{ i + 1 }}</span>
          <span class="step-text">{{ step.label | translate }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Form Content -->
  <form [formGroup]="clientForm" (ngSubmit)="onSubmit()" class="client-form" @slideInOut>
    
    <!-- Step 1: Personal Information -->
    <div class="form-step" *ngIf="currentStep === 'personal'" @fadeInOut>
      <div class="step-header">
        <h2>{{ 'client_form.personal_information' | translate }}</h2>
        <p>{{ 'client_form.personal_info_description' | translate }}</p>
      </div>

      <div class="form-grid" formGroupName="personalInfo">
        <!-- Avatar Upload -->
        <div class="avatar-section">
          <div class="avatar-preview" [class.has-image]="avatarPreview">
            <img *ngIf="avatarPreview" [src]="avatarPreview" alt="Avatar preview" />
            <mat-icon *ngIf="!avatarPreview">person</mat-icon>
          </div>
          <div class="avatar-controls">
            <button type="button" mat-stroked-button (click)="avatarInput.click()" [disabled]="readonly">
              <mat-icon>photo_camera</mat-icon>
              {{ 'client_form.upload_photo' | translate }}
            </button>
            <button type="button" mat-icon-button (click)="removeAvatar()" 
                    *ngIf="avatarPreview" [disabled]="readonly">
              <mat-icon>delete</mat-icon>
            </button>
            <input #avatarInput type="file" hidden accept="image/*" (change)="onAvatarSelected($event)" />
          </div>
        </div>

        <!-- Name Fields -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.first_name' | translate }}</mat-label>
          <input matInput formControlName="firstName" [readonly]="readonly">
          <mat-error *ngIf="hasFieldError('personalInfo.firstName')">
            {{ getFieldError('personalInfo.firstName') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.last_name' | translate }}</mat-label>
          <input matInput formControlName="lastName" [readonly]="readonly">
          <mat-error *ngIf="hasFieldError('personalInfo.lastName')">
            {{ getFieldError('personalInfo.lastName') }}
          </mat-error>
        </mat-form-field>

        <!-- Contact Fields -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.email' | translate }}</mat-label>
          <input matInput type="email" formControlName="email" [readonly]="readonly">
          <mat-spinner matSuffix diameter="20" *ngIf="isFieldPending('personalInfo.email')"></mat-spinner>
          <mat-error *ngIf="hasFieldError('personalInfo.email')">
            {{ getFieldError('personalInfo.email') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.phone' | translate }}</mat-label>
          <input matInput type="tel" formControlName="phone" [readonly]="readonly">
          <mat-spinner matSuffix diameter="20" *ngIf="isFieldPending('personalInfo.phone')"></mat-spinner>
          <mat-error *ngIf="hasFieldError('personalInfo.phone')">
            {{ getFieldError('personalInfo.phone') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.mobile_phone' | translate }}</mat-label>
          <input matInput type="tel" formControlName="mobilePhone" [readonly]="readonly">
          <mat-error *ngIf="hasFieldError('personalInfo.mobilePhone')">
            {{ getFieldError('personalInfo.mobilePhone') }}
          </mat-error>
        </mat-form-field>

        <!-- Additional Personal Info -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.birth_date' | translate }}</mat-label>
          <input matInput [matDatepicker]="birthDatePicker" formControlName="dateOfBirth" [readonly]="readonly">
          <mat-datepicker-toggle matSuffix [for]="birthDatePicker" [disabled]="readonly"></mat-datepicker-toggle>
          <mat-datepicker #birthDatePicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.nationality' | translate }}</mat-label>
          <mat-select formControlName="nationality" [disabled]="readonly">
            <mat-option *ngFor="let country of countries" [value]="country">
              {{ country }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <!-- Step 2: Document Information -->
    <div class="form-step" *ngIf="currentStep === 'document'" @fadeInOut>
      <div class="step-header">
        <h2>{{ 'client_form.document_information' | translate }}</h2>
        <p>{{ 'client_form.document_info_description' | translate }}</p>
      </div>

      <div class="form-grid" formGroupName="documentInfo">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.document_type' | translate }}</mat-label>
          <mat-select formControlName="documentType" [disabled]="readonly">
            <mat-option *ngFor="let docType of documentTypes" [value]="docType.value">
              {{ docType.label }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="hasFieldError('documentInfo.documentType')">
            {{ getFieldError('documentInfo.documentType') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.document_number' | translate }}</mat-label>
          <input matInput formControlName="documentNumber" [readonly]="readonly">
          <mat-error *ngIf="hasFieldError('documentInfo.documentNumber')">
            {{ getFieldError('documentInfo.documentNumber') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'client_form.document_expiry' | translate }}</mat-label>
          <input matInput [matDatepicker]="docExpiryPicker" formControlName="documentExpiryDate" [readonly]="readonly">
          <mat-datepicker-toggle matSuffix [for]="docExpiryPicker" [disabled]="readonly"></mat-datepicker-toggle>
          <mat-datepicker #docExpiryPicker></mat-datepicker>
        </mat-form-field>
      </div>
    </div>

    <!-- Step 3: Contact Information -->
    <div class="form-step" *ngIf="currentStep === 'contact'" @fadeInOut>
      <div class="step-header">
        <h2>{{ 'client_form.contact_information' | translate }}</h2>
        <p>{{ 'client_form.contact_info_description' | translate }}</p>
      </div>

      <div formGroupName="contactInfo">
        <!-- Address -->
        <div class="section-title">
          <mat-icon>home</mat-icon>
          <h3>{{ 'client_form.address' | translate }}</h3>
        </div>
        
        <div class="form-grid" formGroupName="address">
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>{{ 'client_form.street' | translate }}</mat-label>
            <input matInput formControlName="street" [readonly]="readonly">
            <mat-error *ngIf="hasFieldError('contactInfo.address.street')">
              {{ getFieldError('contactInfo.address.street') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="quarter-width">
            <mat-label>{{ 'client_form.street_number' | translate }}</mat-label>
            <input matInput formControlName="streetNumber" [readonly]="readonly">
          </mat-form-field>

          <mat-form-field appearance="outline" class="quarter-width">
            <mat-label>{{ 'client_form.apartment' | translate }}</mat-label>
            <input matInput formControlName="apartment" [readonly]="readonly">
          </mat-form-field>

          <mat-form-field appearance="outline" class="half-width">
            <mat-label>{{ 'client_form.city' | translate }}</mat-label>
            <input matInput formControlName="city" [readonly]="readonly">
            <mat-error *ngIf="hasFieldError('contactInfo.address.city')">
              {{ getFieldError('contactInfo.address.city') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="quarter-width">
            <mat-label>{{ 'client_form.postal_code' | translate }}</mat-label>
            <input matInput formControlName="postalCode" [readonly]="readonly">
            <mat-error *ngIf="hasFieldError('contactInfo.address.postalCode')">
              {{ getFieldError('contactInfo.address.postalCode') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="quarter-width">
            <mat-label>{{ 'client_form.province' | translate }}</mat-label>
            <input matInput formControlName="province" [readonly]="readonly">
            <mat-error *ngIf="hasFieldError('contactInfo.address.province')">
              {{ getFieldError('contactInfo.address.province') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'client_form.country' | translate }}</mat-label>
            <mat-select formControlName="country" [disabled]="readonly">
              <mat-option *ngFor="let country of countries" [value]="country">
                {{ country }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Emergency Contact -->
        <div class="section-title">
          <mat-icon>emergency</mat-icon>
          <h3>{{ 'client_form.emergency_contact' | translate }}</h3>
        </div>
        
        <div class="form-grid" formGroupName="emergencyContact">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'client_form.emergency_name' | translate }}</mat-label>
            <input matInput formControlName="name" [readonly]="readonly">
            <mat-error *ngIf="hasFieldError('contactInfo.emergencyContact.name')">
              {{ getFieldError('contactInfo.emergencyContact.name') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="half-width">
            <mat-label>{{ 'client_form.relationship' | translate }}</mat-label>
            <input matInput formControlName="relationship" [readonly]="readonly">
            <mat-error *ngIf="hasFieldError('contactInfo.emergencyContact.relationship')">
              {{ getFieldError('contactInfo.emergencyContact.relationship') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="half-width">
            <mat-label>{{ 'client_form.emergency_phone' | translate }}</mat-label>
            <input matInput type="tel" formControlName="phone" [readonly]="readonly">
            <mat-error *ngIf="hasFieldError('contactInfo.emergencyContact.phone')">
              {{ getFieldError('contactInfo.emergencyContact.phone') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'client_form.emergency_email' | translate }}</mat-label>
            <input matInput type="email" formControlName="email" [readonly]="readonly">
            <mat-error *ngIf="hasFieldError('contactInfo.emergencyContact.email')">
              {{ getFieldError('contactInfo.emergencyContact.email') }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Step 4: Preferences -->
    <div class="form-step" *ngIf="currentStep === 'preferences'" @fadeInOut>
      <div class="step-header">
        <h2>{{ 'client_form.preferences' | translate }}</h2>
        <p>{{ 'client_form.preferences_description' | translate }}</p>
      </div>

      <div formGroupName="preferences">
        <!-- Communication Preferences -->
        <div class="section-title">
          <mat-icon>settings</mat-icon>
          <h3>{{ 'client_form.communication_preferences' | translate }}</h3>
        </div>

        <div class="form-grid">
          <mat-form-field appearance="outline" class="third-width">
            <mat-label>{{ 'client_form.language' | translate }}</mat-label>
            <mat-select formControlName="language" [disabled]="readonly">
              <mat-option *ngFor="let lang of languages" [value]="lang">
                {{ 'languages.' + lang | translate }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="third-width">
            <mat-label>{{ 'client_form.contact_method' | translate }}</mat-label>
            <mat-select formControlName="contactMethod" [disabled]="readonly">
              <mat-option *ngFor="let method of contactMethods" [value]="method.value">
                {{ method.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="third-width">
            <mat-label>{{ 'client_form.time_preference' | translate }}</mat-label>
            <mat-select formControlName="timePreference" [disabled]="readonly">
              <mat-option *ngFor="let time of timePreferences" [value]="time.value">
                {{ time.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Notification Preferences -->
        <div class="section-title">
          <mat-icon>notifications</mat-icon>
          <h3>{{ 'client_form.notification_preferences' | translate }}</h3>
        </div>

        <div class="checkbox-group" formGroupName="notifications">
          <mat-checkbox formControlName="email" [disabled]="readonly">
            {{ 'client_form.email_notifications' | translate }}
          </mat-checkbox>
          <mat-checkbox formControlName="sms" [disabled]="readonly">
            {{ 'client_form.sms_notifications' | translate }}
          </mat-checkbox>
          <mat-checkbox formControlName="whatsapp" [disabled]="readonly">
            {{ 'client_form.whatsapp_notifications' | translate }}
          </mat-checkbox>
          <mat-checkbox formControlName="push" [disabled]="readonly">
            {{ 'client_form.push_notifications' | translate }}
          </mat-checkbox>
        </div>

        <!-- Special Requirements -->
        <div class="section-title">
          <mat-icon>health_and_safety</mat-icon>
          <h3>{{ 'client_form.special_requirements' | translate }}</h3>
        </div>

        <div class="form-grid">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'client_form.medical_conditions' | translate }}</mat-label>
            <textarea matInput rows="3" formControlName="medicalConditions" [readonly]="readonly"></textarea>
            <mat-hint>{{ 'client_form.medical_conditions_hint' | translate }}</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'client_form.dietary_restrictions' | translate }}</mat-label>
            <textarea matInput rows="3" formControlName="dietaryRestrictions" [readonly]="readonly"></textarea>
            <mat-hint>{{ 'client_form.dietary_restrictions_hint' | translate }}</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'client_form.accessibility_needs' | translate }}</mat-label>
            <textarea matInput rows="3" formControlName="accessibilityNeeds" [readonly]="readonly"></textarea>
            <mat-hint>{{ 'client_form.accessibility_needs_hint' | translate }}</mat-hint>
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Step 5: Legal Consent -->
    <div class="form-step" *ngIf="currentStep === 'legal'" @fadeInOut>
      <div class="step-header">
        <h2>{{ 'client_form.legal_consent' | translate }}</h2>
        <p>{{ 'client_form.legal_consent_description' | translate }}</p>
      </div>

      <div formGroupName="legalConsent">
        <!-- GDPR Consent -->
        <div class="section-title">
          <mat-icon>gavel</mat-icon>
          <h3>{{ 'client_form.gdpr_consent' | translate }}</h3>
        </div>

        <div class="consent-section" formGroupName="gdprConsent">
          <mat-checkbox formControlName="dataProcessingConsent" [disabled]="readonly" class="required-consent">
            {{ 'client_form.data_processing_consent' | translate }}
            <span class="required-indicator">*</span>
          </mat-checkbox>
          <p class="consent-description">{{ 'client_form.data_processing_description' | translate }}</p>

          <mat-checkbox formControlName="marketingConsent" [disabled]="readonly">
            {{ 'client_form.marketing_consent' | translate }}
          </mat-checkbox>
          <p class="consent-description">{{ 'client_form.marketing_consent_description' | translate }}</p>

          <mat-checkbox formControlName="thirdPartySharingConsent" [disabled]="readonly">
            {{ 'client_form.third_party_consent' | translate }}
          </mat-checkbox>
          <p class="consent-description">{{ 'client_form.third_party_description' | translate }}</p>
        </div>

        <!-- Terms and Conditions -->
        <div class="section-title">
          <mat-icon>description</mat-icon>
          <h3>{{ 'client_form.terms_conditions' | translate }}</h3>
        </div>

        <div class="consent-section">
          <mat-checkbox formControlName="marketingConsent" [disabled]="readonly">
            {{ 'client_form.newsletter_consent' | translate }}
          </mat-checkbox>
          <p class="consent-description">{{ 'client_form.newsletter_description' | translate }}</p>

          <mat-checkbox formControlName="termsAccepted" [disabled]="readonly" class="required-consent">
            {{ 'client_form.terms_accepted' | translate }}
            <span class="required-indicator">*</span>
          </mat-checkbox>
          <p class="consent-description">
            {{ 'client_form.terms_description' | translate }}
            <a href="/terms" target="_blank">{{ 'client_form.view_terms' | translate }}</a>
          </p>
        </div>

        <mat-error *ngIf="hasFieldError('legalConsent.gdprConsent.dataProcessingConsent')">
          {{ 'client_form.gdpr_consent_required' | translate }}
        </mat-error>
        <mat-error *ngIf="hasFieldError('legalConsent.termsAccepted')">
          {{ 'client_form.terms_acceptance_required' | translate }}
        </mat-error>
      </div>
    </div>

    <!-- Step 6: Review -->
    <div class="form-step" *ngIf="currentStep === 'review'" @fadeInOut>
      <div class="step-header">
        <h2>{{ 'client_form.review_information' | translate }}</h2>
        <p>{{ 'client_form.review_description' | translate }}</p>
      </div>

      <div class="review-sections">
        <!-- Personal Information Review -->
        <div class="review-section">
          <h3>
            <mat-icon>person</mat-icon>
            {{ 'client_form.personal_information' | translate }}
          </h3>
          <div class="review-content">
            <div class="review-item" *ngIf="clientForm.get('personalInfo.firstName')?.value">
              <span class="label">{{ 'client_form.full_name' | translate }}:</span>
              <span class="value">
                {{ clientForm.get('personalInfo.firstName')?.value }} 
                {{ clientForm.get('personalInfo.lastName')?.value }}
              </span>
            </div>
            <div class="review-item" *ngIf="clientForm.get('personalInfo.email')?.value">
              <span class="label">{{ 'client_form.email' | translate }}:</span>
              <span class="value">{{ clientForm.get('personalInfo.email')?.value }}</span>
            </div>
            <div class="review-item" *ngIf="clientForm.get('personalInfo.phone')?.value">
              <span class="label">{{ 'client_form.phone' | translate }}:</span>
              <span class="value">{{ clientForm.get('personalInfo.phone')?.value }}</span>
            </div>
            <div class="review-item" *ngIf="clientForm.get('personalInfo.dateOfBirth')?.value">
              <span class="label">{{ 'client_form.birth_date' | translate }}:</span>
              <span class="value">{{ clientForm.get('personalInfo.dateOfBirth')?.value | date }}</span>
            </div>
          </div>
        </div>

        <!-- Document Information Review -->
        <div class="review-section">
          <h3>
            <mat-icon>badge</mat-icon>
            {{ 'client_form.document_information' | translate }}
          </h3>
          <div class="review-content">
            <div class="review-item" *ngIf="clientForm.get('documentInfo.documentType')?.value">
              <span class="label">{{ 'client_form.document_type' | translate }}:</span>
              <span class="value">{{ clientForm.get('documentInfo.documentType')?.value | uppercase }}</span>
            </div>
            <div class="review-item" *ngIf="clientForm.get('documentInfo.documentNumber')?.value">
              <span class="label">{{ 'client_form.document_number' | translate }}:</span>
              <span class="value">{{ clientForm.get('documentInfo.documentNumber')?.value }}</span>
            </div>
          </div>
        </div>

        <!-- Contact Information Review -->
        <div class="review-section">
          <h3>
            <mat-icon>home</mat-icon>
            {{ 'client_form.contact_information' | translate }}
          </h3>
          <div class="review-content">
            <div class="review-item" *ngIf="clientForm.get('contactInfo.address.street')?.value">
              <span class="label">{{ 'client_form.address' | translate }}:</span>
              <span class="value">
                {{ clientForm.get('contactInfo.address.street')?.value }}
                {{ clientForm.get('contactInfo.address.streetNumber')?.value }},
                {{ clientForm.get('contactInfo.address.city')?.value }}
                {{ clientForm.get('contactInfo.address.postalCode')?.value }}
              </span>
            </div>
            <div class="review-item" *ngIf="clientForm.get('contactInfo.emergencyContact.name')?.value">
              <span class="label">{{ 'client_form.emergency_contact' | translate }}:</span>
              <span class="value">
                {{ clientForm.get('contactInfo.emergencyContact.name')?.value }}
                ({{ clientForm.get('contactInfo.emergencyContact.relationship')?.value }})
                - {{ clientForm.get('contactInfo.emergencyContact.phone')?.value }}
              </span>
            </div>
          </div>
        </div>

        <!-- Preferences Review -->
        <div class="review-section">
          <h3>
            <mat-icon>settings</mat-icon>
            {{ 'client_form.preferences' | translate }}
          </h3>
          <div class="review-content">
            <div class="review-item">
              <span class="label">{{ 'client_form.language' | translate }}:</span>
              <span class="value">{{ 'languages.' + clientForm.get('preferences.language')?.value | translate }}</span>
            </div>
            <div class="review-item">
              <span class="label">{{ 'client_form.contact_method' | translate }}:</span>
              <span class="value">{{ clientForm.get('preferences.contactMethod')?.value }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Notes -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ 'client_form.notes' | translate }}</mat-label>
        <textarea matInput rows="4" formControlName="notes" [readonly]="readonly"></textarea>
        <mat-hint>{{ 'client_form.notes_hint' | translate }}</mat-hint>
      </mat-form-field>
    </div>

    <!-- Form Actions -->
    <div class="form-actions" *ngIf="!readonly">
      <div class="action-buttons">
        <button type="button" mat-stroked-button (click)="onCancel()" [disabled]="isSaving">
          <mat-icon>cancel</mat-icon>
          {{ 'common.cancel' | translate }}
        </button>

        <button type="button" mat-stroked-button (click)="previousStep()" 
                *ngIf="!isFirstStep()" [disabled]="isSaving">
          <mat-icon>arrow_back</mat-icon>
          {{ 'common.previous' | translate }}
        </button>

        <button type="button" mat-raised-button color="primary" (click)="nextStep()" 
                *ngIf="!isLastStep()" [disabled]="isSaving">
          {{ 'common.next' | translate }}
          <mat-icon>arrow_forward</mat-icon>
        </button>

        <button type="submit" mat-raised-button color="primary" 
                *ngIf="isLastStep()" [disabled]="!clientForm.valid || isSaving">
          <mat-spinner diameter="20" *ngIf="isSaving"></mat-spinner>
          <mat-icon *ngIf="!isSaving">{{ isEditMode ? 'save' : 'person_add' }}</mat-icon>
          {{ isEditMode ? ('common.save' | translate) : ('client_form.create_client' | translate) }}
        </button>
      </div>
    </div>
  </form>

  <!-- Form Errors -->
  <div class="form-errors" *ngIf="stepValidations[currentStep].errors.length > 0" @fadeInOut>
    <div class="error-header">
      <mat-icon>error</mat-icon>
      <span>{{ 'client_form.fix_errors' | translate }}</span>
    </div>
    <ul class="error-list">
      <li *ngFor="let error of stepValidations[currentStep].errors">{{ error }}</li>
    </ul>
  </div>
</div>