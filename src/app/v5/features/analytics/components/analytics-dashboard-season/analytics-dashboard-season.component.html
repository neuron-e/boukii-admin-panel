<!--
<div class="analytics-dashboard-container">
  &lt;!&ndash; Header Section &ndash;&gt;
  <div class="dashboard-header">
    <div class="header-content">
      <h1 class="dashboard-title">
        {{ 'analytics.dashboard' | translate }}
        <span class="season-indicator" *ngIf="currentSeason$ | async as currentSeason">
          - {{ currentSeason.name }}
        </span>
      </h1>

      <div class="dashboard-subtitle">
        <span class="last-updated" *ngIf="lastUpdated">
          {{ 'analytics.last_updated' | translate }}: {{ lastUpdated | date:'medium' }}
        </span>
        <mat-icon
          class="refresh-indicator"
          [class.spinning]="isLoading"
          (click)="refreshDashboard()"
          matTooltip="{{ 'analytics.refresh_data' | translate }}">
          refresh
        </mat-icon>
      </div>
    </div>

    <div class="header-actions">
      &lt;!&ndash; Time Range Selector &ndash;&gt;
      <mat-form-field appearance="outline" class="time-range-field">
        <mat-label>{{ 'analytics.time_range' | translate }}</mat-label>
        <mat-select [(value)]="selectedTimeRange" (selectionChange)="onTimeRangeChange($event.value)">
          <mat-option value="today">{{ 'analytics.today' | translate }}</mat-option>
          <mat-option value="week">{{ 'analytics.this_week' | translate }}</mat-option>
          <mat-option value="month">{{ 'analytics.this_month' | translate }}</mat-option>
          <mat-option value="quarter">{{ 'analytics.this_quarter' | translate }}</mat-option>
          <mat-option value="year">{{ 'analytics.this_year' | translate }}</mat-option>
          <mat-option value="custom">{{ 'analytics.custom_range' | translate }}</mat-option>
        </mat-select>
      </mat-form-field>

      &lt;!&ndash; Custom Date Range (shown when custom is selected) &ndash;&gt;
      <div class="custom-date-range" *ngIf="selectedTimeRange === 'custom'">
        <mat-form-field appearance="outline" class="date-field">
          <mat-label>{{ 'analytics.from_date' | translate }}</mat-label>
          <input matInput [matDatepicker]="fromDatePicker" [(ngModel)]="customDateRange.start">
          <mat-datepicker-toggle matSuffix [for]="fromDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #fromDatePicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" class="date-field">
          <mat-label>{{ 'analytics.to_date' | translate }}</mat-label>
          <input matInput [matDatepicker]="toDatePicker" [(ngModel)]="customDateRange.end">
          <mat-datepicker-toggle matSuffix [for]="toDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #toDatePicker></mat-datepicker>
        </mat-form-field>
      </div>

      &lt;!&ndash; Comparison Toggle &ndash;&gt;
      <mat-slide-toggle
        [(ngModel)]="comparisonEnabled"
        (change)="onComparisonToggle($event.checked)"
        class="comparison-toggle">
        {{ 'analytics.compare_previous_period' | translate }}
      </mat-slide-toggle>

      &lt;!&ndash; Export Button &ndash;&gt;
      <button mat-raised-button
              color="primary"
              (click)="exportDashboard()"
              class="export-btn">
        <mat-icon>download</mat-icon>
        {{ 'analytics.export' | translate }}
      </button>

      &lt;!&ndash; Dashboard Settings &ndash;&gt;
      <button mat-icon-button
              [matMenuTriggerFor]="dashboardMenu"
              matTooltip="{{ 'analytics.dashboard_options' | translate }}">
        <mat-icon>more_vert</mat-icon>
      </button>
    </div>
  </div>

  &lt;!&ndash; Loading Overlay &ndash;&gt;
  <div class="loading-overlay" *ngIf="isLoading">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    <span class="loading-text">{{ 'analytics.loading_analytics' | translate }}</span>
  </div>

  &lt;!&ndash; Dashboard Content &ndash;&gt;
  <div class="dashboard-content" [class.loading]="isLoading">

    &lt;!&ndash; Key Performance Indicators &ndash;&gt;
    <div class="kpi-section">
      <h2 class="section-title">{{ 'analytics.key_performance_indicators' | translate }}</h2>

      <div class="kpi-grid">
        <mat-card class="kpi-card revenue-kpi" *ngIf="analyticsData?.revenue">
          <mat-card-content>
            <div class="kpi-content">
              <div class="kpi-icon revenue-icon">
                <mat-icon>attach_money</mat-icon>
              </div>
              <div class="kpi-details">
                <span class="kpi-label">{{ 'analytics.total_revenue' | translate }}</span>
                <span class="kpi-value">{{ analyticsData.revenue.total_revenue.value | currency:'EUR':'symbol':'1.2-2' }}</span>
                <span class="kpi-change" [class]="getChangeClass(analyticsData.revenue.total_revenue.change_percentage)">
                  <mat-icon>{{ getChangeIcon(analyticsData.revenue.total_revenue.change_percentage) }}</mat-icon>
                  {{ analyticsData.revenue.total_revenue.change_percentage | percent:'1.1-1' }}
                </span>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="kpi-card bookings-kpi" *ngIf="analyticsData?.bookings">
          <mat-card-content>
            <div class="kpi-content">
              <div class="kpi-icon bookings-icon">
                <mat-icon>event_available</mat-icon>
              </div>
              <div class="kpi-details">
                <span class="kpi-label">{{ 'analytics.total_bookings' | translate }}</span>
                <span class="kpi-value">{{ analyticsData.bookings.total_bookings.value | number:'1.0-0' }}</span>
                <span class="kpi-change" [class]="getChangeClass(analyticsData.bookings.total_bookings.change_percentage)">
                  <mat-icon>{{ getChangeIcon(analyticsData.bookings.total_bookings.change_percentage) }}</mat-icon>
                  {{ analyticsData.bookings.total_bookings.change_percentage | percent:'1.1-1' }}
                </span>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="kpi-card clients-kpi" *ngIf="analyticsData?.clients">
          <mat-card-content>
            <div class="kpi-content">
              <div class="kpi-icon clients-icon">
                <mat-icon>people</mat-icon>
              </div>
              <div class="kpi-details">
                <span class="kpi-label">{{ 'analytics.total_clients' | translate }}</span>
                <span class="kpi-value">{{ analyticsData.clients.total_clients.value | number:'1.0-0' }}</span>
                <span class="kpi-change" [class]="getChangeClass(analyticsData.clients.total_clients.change_percentage)">
                  <mat-icon>{{ getChangeIcon(analyticsData.clients.total_clients.change_percentage) }}</mat-icon>
                  {{ analyticsData.clients.total_clients.change_percentage | percent:'1.1-1' }}
                </span>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="kpi-card monitors-kpi" *ngIf="analyticsData?.monitors">
          <mat-card-content>
            <div class="kpi-content">
              <div class="kpi-icon monitors-icon">
                <mat-icon>supervisor_account</mat-icon>
              </div>
              <div class="kpi-details">
                <span class="kpi-label">{{ 'analytics.monitor_utilization' | translate }}</span>
                <span class="kpi-value">{{ analyticsData.monitors.monitor_utilization.overall_utilization_rate.value | percent:'1.1-1' }}</span>
                <span class="kpi-change" [class]="getChangeClass(analyticsData.monitors.monitor_utilization.overall_utilization_rate.change_percentage)">
                  <mat-icon>{{ getChangeIcon(analyticsData.monitors.monitor_utilization.overall_utilization_rate.change_percentage) }}</mat-icon>
                  {{ analyticsData.monitors.monitor_utilization.overall_utilization_rate.change_percentage | percent:'1.1-1' }}
                </span>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    &lt;!&ndash; Charts Section &ndash;&gt;
    <div class="charts-section">
      <div class="charts-grid">

        &lt;!&ndash; Revenue Over Time Chart &ndash;&gt;
        <mat-card class="chart-card revenue-chart">
          <mat-card-header>
            <mat-card-title>{{ 'analytics.revenue_over_time' | translate }}</mat-card-title>
            <mat-card-subtitle>{{ getChartSubtitle('revenue') }}</mat-card-subtitle>
            <button mat-icon-button [matMenuTriggerFor]="revenueChartMenu" class="chart-menu-btn">
              <mat-icon>more_vert</mat-icon>
            </button>
          </mat-card-header>
          <mat-card-content>
            <canvas #revenueChart
                    class="chart-canvas"
                    [style.height.px]="300">
            </canvas>
          </mat-card-content>
        </mat-card>

        &lt;!&ndash; Bookings Distribution Chart &ndash;&gt;
        <mat-card class="chart-card bookings-chart">
          <mat-card-header>
            <mat-card-title>{{ 'analytics.bookings_by_status' | translate }}</mat-card-title>
            <mat-card-subtitle>{{ getChartSubtitle('bookings') }}</mat-card-subtitle>
            <button mat-icon-button [matMenuTriggerFor]="bookingsChartMenu" class="chart-menu-btn">
              <mat-icon>more_vert</mat-icon>
            </button>
          </mat-card-header>
          <mat-card-content>
            <canvas #bookingsChart
                    class="chart-canvas"
                    [style.height.px]="300">
            </canvas>
          </mat-card-content>
        </mat-card>

        &lt;!&ndash; Client Retention Chart &ndash;&gt;
        <mat-card class="chart-card retention-chart">
          <mat-card-header>
            <mat-card-title>{{ 'analytics.client_retention' | translate }}</mat-card-title>
            <mat-card-subtitle>{{ getChartSubtitle('retention') }}</mat-card-subtitle>
            <button mat-icon-button [matMenuTriggerFor]="retentionChartMenu" class="chart-menu-btn">
              <mat-icon>more_vert</mat-icon>
            </button>
          </mat-card-header>
          <mat-card-content>
            <canvas #retentionChart
                    class="chart-canvas"
                    [style.height.px]="300">
            </canvas>
          </mat-card-content>
        </mat-card>

        &lt;!&ndash; Monitor Performance Chart &ndash;&gt;
        <mat-card class="chart-card performance-chart">
          <mat-card-header>
            <mat-card-title>{{ 'analytics.monitor_performance' | translate }}</mat-card-title>
            <mat-card-subtitle>{{ getChartSubtitle('performance') }}</mat-card-subtitle>
            <button mat-icon-button [matMenuTriggerFor]="performanceChartMenu" class="chart-menu-btn">
              <mat-icon>more_vert</mat-icon>
            </button>
          </mat-card-header>
          <mat-card-content>
            <canvas #performanceChart
                    class="chart-canvas"
                    [style.height.px]="300">
            </canvas>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    &lt;!&ndash; Insights Section &ndash;&gt;
    <div class="insights-section" *ngIf="analyticsData?.cross_functional_insights?.length">
      <h2 class="section-title">{{ 'analytics.business_insights' | translate }}</h2>

      <div class="insights-grid">
        <mat-card class="insight-card"
                  *ngFor="let insight of analyticsData.cross_functional_insights; let i = index"
                  [class]="'priority-' + insight.priority">
          <mat-card-header>
            <div class="insight-icon" [class]="'insight-' + insight.insight_type">
              <mat-icon>{{ getInsightIcon(insight.insight_type) }}</mat-icon>
            </div>
            <mat-card-title>{{ insight.title }}</mat-card-title>
            <mat-card-subtitle>
              <span class="insight-priority">{{ insight.priority | translate }}</span>
              <span class="insight-confidence">{{ 'analytics.confidence' | translate }}: {{ insight.confidence_level | percent:'1.0-0' }}</span>
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p class="insight-description">{{ insight.description }}</p>

            <div class="insight-details" *ngIf="insight.recommended_actions.length">
              <h4>{{ 'analytics.recommended_actions' | translate }}</h4>
              <ul class="actions-list">
                <li *ngFor="let action of insight.recommended_actions">{{ action }}</li>
              </ul>
            </div>

            <div class="insight-impact">
              <span class="impact-label">{{ 'analytics.impact_score' | translate }}:</span>
              <div class="impact-bar">
                <div class="impact-fill" [style.width.%]="insight.impact_score"></div>
              </div>
              <span class="impact-value">{{ insight.impact_score }}/100</span>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary" (click)="applyInsightAction(insight)">
              {{ 'analytics.take_action' | translate }}
            </button>
            <button mat-button (click)="dismissInsight(insight)">
              {{ 'analytics.dismiss' | translate }}
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>

    &lt;!&ndash; Performance Summary &ndash;&gt;
    <div class="performance-summary-section" *ngIf="analyticsData?.performance_summary">
      <h2 class="section-title">{{ 'analytics.performance_summary' | translate }}</h2>

      <mat-card class="summary-card">
        <mat-card-content>
          <div class="summary-content">

            &lt;!&ndash; Overall Score &ndash;&gt;
            <div class="overall-score">
              <h3>{{ 'analytics.overall_performance' | translate }}</h3>
              <div class="score-circle">
                <svg viewBox="0 0 100 100" class="score-svg">
                  <circle cx="50" cy="50" r="45"
                          class="score-bg-circle"></circle>
                  <circle cx="50" cy="50" r="45"
                          class="score-progress-circle"
                          [style.stroke-dasharray]="getScoreCircumference()"
                          [style.stroke-dashoffset]="getScoreOffset(analyticsData.performance_summary.overall_score)"></circle>
                </svg>
                <span class="score-text">{{ analyticsData.performance_summary.overall_score }}/100</span>
              </div>
            </div>

            &lt;!&ndash; Health Scores &ndash;&gt;
            <div class="health-scores">
              <h4>{{ 'analytics.health_indicators' | translate }}</h4>
              <div class="health-grid">
                <div class="health-item">
                  <span class="health-label">{{ 'analytics.financial_health' | translate }}</span>
                  <mat-progress-bar mode="determinate"
                                    [value]="analyticsData.performance_summary.health_score.financial_health"
                                    class="health-bar financial"></mat-progress-bar>
                  <span class="health-value">{{ analyticsData.performance_summary.health_score.financial_health }}/100</span>
                </div>

                <div class="health-item">
                  <span class="health-label">{{ 'analytics.operational_health' | translate }}</span>
                  <mat-progress-bar mode="determinate"
                                    [value]="analyticsData.performance_summary.health_score.operational_health"
                                    class="health-bar operational"></mat-progress-bar>
                  <span class="health-value">{{ analyticsData.performance_summary.health_score.operational_health }}/100</span>
                </div>

                <div class="health-item">
                  <span class="health-label">{{ 'analytics.client_satisfaction_health' | translate }}</span>
                  <mat-progress-bar mode="determinate"
                                    [value]="analyticsData.performance_summary.health_score.client_satisfaction_health"
                                    class="health-bar client"></mat-progress-bar>
                  <span class="health-value">{{ analyticsData.performance_summary.health_score.client_satisfaction_health }}/100</span>
                </div>

                <div class="health-item">
                  <span class="health-label">{{ 'analytics.staff_satisfaction_health' | translate }}</span>
                  <mat-progress-bar mode="determinate"
                                    [value]="analyticsData.performance_summary.health_score.staff_satisfaction_health"
                                    class="health-bar staff"></mat-progress-bar>
                  <span class="health-value">{{ analyticsData.performance_summary.health_score.staff_satisfaction_health }}/100</span>
                </div>
              </div>
            </div>

            &lt;!&ndash; Risk Factors &ndash;&gt;
            <div class="risk-factors" *ngIf="analyticsData.performance_summary.health_score.risk_factors.length">
              <h4>{{ 'analytics.risk_factors' | translate }}</h4>
              <div class="risk-list">
                <div class="risk-item"
                     *ngFor="let risk of analyticsData.performance_summary.health_score.risk_factors"
                     [class]="'severity-' + risk.severity">
                  <mat-icon class="risk-icon">{{ getRiskIcon(risk.severity) }}</mat-icon>
                  <div class="risk-content">
                    <span class="risk-type">{{ risk.risk_type }}</span>
                    <span class="risk-probability">{{ 'analytics.probability' | translate }}: {{ risk.probability | percent:'1.0-0' }}</span>
                    <p class="risk-impact">{{ risk.potential_impact }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    &lt;!&ndash; Data Freshness Info &ndash;&gt;
    <div class="data-freshness-section" *ngIf="analyticsData?.data_freshness">
      <mat-card class="freshness-card">
        <mat-card-content>
          <div class="freshness-content">
            <div class="freshness-indicator">
              <mat-icon [class]="getFreshnessIconClass(analyticsData.data_freshness.quality_score)">
                {{ getFreshnessIcon(analyticsData.data_freshness.quality_score) }}
              </mat-icon>
              <span class="freshness-score">
                {{ 'analytics.data_quality' | translate }}: {{ analyticsData.data_freshness.quality_score }}/100
              </span>
            </div>

            <div class="freshness-details">
              <span class="coverage">
                {{ 'analytics.data_coverage' | translate }}: {{ analyticsData.data_freshness.coverage_percentage | percent:'1.1-1' }}
              </span>
              <span class="last-sync">
                {{ 'analytics.last_sync' | translate }}: {{ analyticsData.data_freshness.last_updated | date:'medium' }}
              </span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  &lt;!&ndash; No Data Message &ndash;&gt;
  <div class="no-data" *ngIf="!isLoading && !analyticsData">
    <mat-icon>analytics</mat-icon>
    <h3>{{ 'analytics.no_data_available' | translate }}</h3>
    <p>{{ 'analytics.no_data_description' | translate }}</p>
    <button mat-raised-button color="primary" (click)="refreshDashboard()">
      {{ 'analytics.load_data' | translate }}
    </button>
  </div>
</div>

&lt;!&ndash; Context Menus &ndash;&gt;
<mat-menu #dashboardMenu="matMenu">
  <button mat-menu-item (click)="openDashboardSettings()">
    <mat-icon>settings</mat-icon>
    {{ 'analytics.dashboard_settings' | translate }}
  </button>
  <button mat-menu-item (click)="saveDashboard()">
    <mat-icon>save</mat-icon>
    {{ 'analytics.save_dashboard' | translate }}
  </button>
  <button mat-menu-item (click)="resetDashboard()">
    <mat-icon>refresh</mat-icon>
    {{ 'analytics.reset_dashboard' | translate }}
  </button>
  <mat-divider></mat-divider>
  <button mat-menu-item (click)="shareSettings()">
    <mat-icon>share</mat-icon>
    {{ 'analytics.share_dashboard' | translate }}
  </button>
</mat-menu>

<mat-menu #revenueChartMenu="matMenu">
  <button mat-menu-item (click)="exportChart('revenue', 'png')">
    <mat-icon>image</mat-icon>
    {{ 'analytics.export_as_image' | translate }}
  </button>
  <button mat-menu-item (click)="exportChart('revenue', 'csv')">
    <mat-icon>table_chart</mat-icon>
    {{ 'analytics.export_data' | translate }}
  </button>
  <button mat-menu-item (click)="toggleChartComparison('revenue')">
    <mat-icon>compare</mat-icon>
    {{ 'analytics.toggle_comparison' | translate }}
  </button>
</mat-menu>

<mat-menu #bookingsChartMenu="matMenu">
  <button mat-menu-item (click)="exportChart('bookings', 'png')">
    <mat-icon>image</mat-icon>
    {{ 'analytics.export_as_image' | translate }}
  </button>
  <button mat-menu-item (click)="exportChart('bookings', 'csv')">
    <mat-icon>table_chart</mat-icon>
    {{ 'analytics.export_data' | translate }}
  </button>
  <button mat-menu-item (click)="toggleChartComparison('bookings')">
    <mat-icon>compare</mat-icon>
    {{ 'analytics.toggle_comparison' | translate }}
  </button>
</mat-menu>

<mat-menu #retentionChartMenu="matMenu">
  <button mat-menu-item (click)="exportChart('retention', 'png')">
    <mat-icon>image</mat-icon>
    {{ 'analytics.export_as_image' | translate }}
  </button>
  <button mat-menu-item (click)="exportChart('retention', 'csv')">
    <mat-icon>table_chart</mat-icon>
    {{ 'analytics.export_data' | translate }}
  </button>
  <button mat-menu-item (click)="toggleChartComparison('retention')">
    <mat-icon>compare</mat-icon>
    {{ 'analytics.toggle_comparison' | translate }}
  </button>
</mat-menu>

<mat-menu #performanceChartMenu="matMenu">
  <button mat-menu-item (click)="exportChart('performance', 'png')">
    <mat-icon>image</mat-icon>
    {{ 'analytics.export_as_image' | translate }}
  </button>
  <button mat-menu-item (click)="exportChart('performance', 'csv')">
    <mat-icon>table_chart</mat-icon>
    {{ 'analytics.export_data' | translate }}
  </button>
  <button mat-menu-item (click)="toggleChartComparison('performance')">
    <mat-icon>compare</mat-icon>
    {{ 'analytics.toggle_comparison' | translate }}
  </button>
</mat-menu>-->
