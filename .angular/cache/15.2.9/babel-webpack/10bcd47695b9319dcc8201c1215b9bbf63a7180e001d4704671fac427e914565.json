{"ast":null,"code":"var _class;\nimport { __decorate } from \"tslib\";\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { filter } from 'rxjs/operators';\nimport { UntypedFormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/layout.service\";\nimport * as i2 from \"../../services/search.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/forms\";\nconst _c0 = [\"searchInput\"];\nfunction SearchComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵlistener(\"click\", function SearchComponent_div_8_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.close());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nlet SearchComponent = (_class = class SearchComponent {\n  constructor(layoutService, searchService) {\n    this.layoutService = layoutService;\n    this.searchService = searchService;\n    this.show$ = this.layoutService.searchOpen$;\n    this.searchCtrl = new UntypedFormControl();\n  }\n  ngOnInit() {\n    this.searchService.isOpenSubject.next(true);\n    this.searchCtrl.valueChanges.pipe(untilDestroyed(this)).subscribe(value => this.searchService.valueChangesSubject.next(value));\n    this.show$.pipe(filter(show => show), untilDestroyed(this)).subscribe(() => this.input.nativeElement.focus());\n  }\n  close() {\n    this.layoutService.closeSearch();\n    this.searchCtrl.setValue(undefined);\n    this.searchService.isOpenSubject.next(false);\n  }\n  search() {\n    this.searchService.submitSubject.next(this.searchCtrl.value);\n    this.close();\n  }\n  ngOnDestroy() {\n    this.layoutService.closeSearch();\n    this.searchCtrl.setValue(undefined);\n    this.searchService.isOpenSubject.next(false);\n  }\n}, _class.ɵfac = function SearchComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.LayoutService), i0.ɵɵdirectiveInject(i2.SearchService));\n}, _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"vex-search\"]],\n  viewQuery: function SearchComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.input = _t.first);\n    }\n  },\n  decls: 10,\n  vars: 8,\n  consts: [[1, \"search\", 3, \"keyup.escape\"], [\"color\", \"primary\", \"mat-icon-button\", \"\", \"type\", \"button\", 1, \"ltr:right-12\", \"rtl:left-12\", \"top-12\", \"absolute\", 3, \"click\"], [\"svgIcon\", \"mat:close\"], [\"placeholder\", \"Search...\", 1, \"search-input\", 3, \"formControl\", \"keyup.enter\"], [\"searchInput\", \"\"], [1, \"search-hint\"], [\"class\", \"search-overlay\", 3, \"click\", 4, \"ngIf\"], [1, \"search-overlay\", 3, \"click\"]],\n  template: function SearchComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"keyup.escape\", function SearchComponent_Template_div_keyup_escape_0_listener() {\n        return ctx.close();\n      });\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵelementStart(2, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function SearchComponent_Template_button_click_2_listener() {\n        return ctx.close();\n      });\n      i0.ɵɵelement(3, \"mat-icon\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"input\", 3, 4);\n      i0.ɵɵlistener(\"keyup.enter\", function SearchComponent_Template_input_keyup_enter_4_listener() {\n        return ctx.search();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5);\n      i0.ɵɵtext(7, \"Hit enter to search\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(8, SearchComponent_div_8_Template, 1, 0, \"div\", 6);\n      i0.ɵɵpipe(9, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"show\", i0.ɵɵpipeBind1(1, 4, ctx.show$));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formControl\", ctx.searchCtrl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(9, 6, ctx.show$));\n    }\n  },\n  dependencies: [i3.NgIf, i4.MatIconButton, i5.MatIcon, i6.DefaultValueAccessor, i6.NgControlStatus, i6.FormControlDirective, i3.AsyncPipe],\n  styles: [\".search[_ngcontent-%COMP%] {\\n  position: fixed;\\n  top: 0px;\\n  left: 0px;\\n  display: flex;\\n  width: 100%;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  text-align: center;\\n  opacity: 0;\\n  height: 50vh;\\n  pointer-events: none;\\n  transform: scale(0.75);\\n  transition: all 0.25s cubic-bezier(0.2, 1, 0.3, 1);\\n  z-index: 1050;\\n}\\n.search.show[_ngcontent-%COMP%] {\\n  opacity: 1;\\n  pointer-events: auto;\\n  transform: scale(1);\\n  transition: all 0.5s cubic-bezier(0.2, 1, 0.3, 1);\\n}\\n\\n.search-input[_ngcontent-%COMP%] {\\n  border-bottom: 1px solid var(--foreground-divider);\\n  font-size: 7vw;\\n  line-height: 3rem;\\n  width: 75%;\\n  margin: 0px;\\n  border-radius: 0px;\\n  border-right-width: 0px;\\n  border-left-width: 0px;\\n  border-top-width: 0px;\\n  background-color: transparent;\\n  font-weight: 700;\\n}\\n.search-input[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n}\\n\\n.search-hint[_ngcontent-%COMP%] {\\n  width: 75%;\\n  margin-left: auto;\\n  margin-right: auto;\\n  padding-top: 1rem;\\n  padding-bottom: 1rem;\\n  text-align: right;\\n  font-size: 1rem;\\n  line-height: 1.5rem;\\n  font-weight: 700;\\n  color: var(--text-hint);\\n}\\n\\n.search-overlay[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 0px;\\n  left: 0px;\\n  width: 100%;\\n  opacity: 0;\\n  height: 50vh;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9AdmV4L2NvbXBvbmVudHMvc2VhcmNoL3NlYXJjaC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUFBLGVBQUE7RUFBQSxRQUFBO0VBQUEsU0FBQTtFQUFBLGFBQUE7RUFBQSxXQUFBO0VBQUEsc0JBQUE7RUFBQSxtQkFBQTtFQUFBLHVCQUFBO0VBQUEsa0JBQUE7RUFBQSxVQUFBO0VBQ0EsWUFBQTtFQUNBLG9CQUFBO0VBQ0Esc0JBQUE7RUFDQSxrREFBQTtFQUNBO0FBTEE7QUFPQTtFQUNFLFVBQUE7RUFDQSxvQkFBQTtFQUNBLG1CQUFBO0VBQ0EsaURBQUE7QUFDSjs7QUFHQTtFQUNFLGtEQUFBO0VBQ0EsY0FBQTtFQUNBLGlCQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7RUFBQSxrQkFBQTtFQUFBLHVCQUFBO0VBQUEsc0JBQUE7RUFBQSxxQkFBQTtFQUFBLDZCQUFBO0VBQUEsZ0JBQUE7QUFBRjtBQUVFO0VBQ0UsYUFBQTtBQUFKOztBQUlBO0VBQ0UsVUFBQTtFQUNBLGlCQUFBO0VBQUEsa0JBQUE7RUFBQSxpQkFBQTtFQUFBLG9CQUFBO0VBQUEsaUJBQUE7RUFBQSxlQUFBO0VBQUEsbUJBQUE7RUFBQSxnQkFBQTtFQUFBLHVCQUFBO0FBREY7O0FBS0U7RUFBQSxlQUFBO0VBQUEsV0FBQTtFQUFBLFNBQUE7RUFBQSxXQUFBO0VBQUEsVUFBQTtFQUNBO0FBREEiLCJzb3VyY2VzQ29udGVudCI6WyIuc2VhcmNoIHtcclxuICBAYXBwbHkgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1jZW50ZXIgZml4ZWQgdG9wLTAgbGVmdC0wIHctZnVsbCBvcGFjaXR5LTA7XHJcbiAgaGVpZ2h0OiA1MHZoO1xyXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gIHRyYW5zZm9ybTogc2NhbGUoMC43NSk7XHJcbiAgdHJhbnNpdGlvbjogYWxsIC4yNXMgY3ViaWMtYmV6aWVyKC4yLCAxLCAuMywgMSk7XHJcbiAgei1pbmRleDogMTA1MDtcclxuXHJcbiAgJi5zaG93IHtcclxuICAgIG9wYWNpdHk6IDE7XHJcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcclxuICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XHJcbiAgICB0cmFuc2l0aW9uOiBhbGwgLjVzIGN1YmljLWJlemllciguMiwgMSwgLjMsIDEpO1xyXG4gIH1cclxufVxyXG5cclxuLnNlYXJjaC1pbnB1dCB7XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWZvcmVncm91bmQtZGl2aWRlcik7XHJcbiAgZm9udC1zaXplOiA3dnc7XHJcbiAgbGluZS1oZWlnaHQ6IDNyZW07XHJcbiAgd2lkdGg6IDc1JTtcclxuICBAYXBwbHkgbS0wIHJvdW5kZWQtbm9uZSBib3JkZXItci0wIGJvcmRlci1sLTAgYm9yZGVyLXQtMCBmb250LWJvbGQgYmctdHJhbnNwYXJlbnQ7XHJcblxyXG4gICY6Zm9jdXMge1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICB9XHJcbn1cclxuXHJcbi5zZWFyY2gtaGludCB7XHJcbiAgd2lkdGg6IDc1JTtcclxuICBAYXBwbHkgdGV4dC1iYXNlIHRleHQtcmlnaHQgcHktNCBteC1hdXRvIHRleHQtaGludCBmb250LWJvbGQ7XHJcbn1cclxuXHJcbi5zZWFyY2gtb3ZlcmxheSB7XHJcbiAgQGFwcGx5IGZpeGVkIHctZnVsbCBib3R0b20tMCBsZWZ0LTAgb3BhY2l0eS0wO1xyXG4gIGhlaWdodDogNTB2aDtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n}), _class);\nSearchComponent = __decorate([UntilDestroy()], SearchComponent);\nexport { SearchComponent };","map":{"version":3,"mappings":";;AAEA,SAASA,YAAY,EAAEC,cAAc,QAAQ,uBAAuB;AACpE,SAASC,MAAM,QAAQ,gBAAgB;AACvC,SAASC,kBAAkB,QAAQ,gBAAgB;;;;;;;;;;;;ICSnDC,8BAAoE;IAA/DA;MAAAA;MAAA;MAAA,OAASA,6BAAO;IAAA,EAAC;IAA8CA,iBAAM;;;ADAnE,IAAMC,eAAe,aAArB,MAAMA,eAAe;EAO1BC,YAAoBC,aAA4B,EAC5BC,aAA4B;IAD5B,kBAAa,GAAbD,aAAa;IACb,kBAAa,GAAbC,aAAa;IANjC,UAAK,GAAG,IAAI,CAACD,aAAa,CAACE,WAAW;IACtC,eAAU,GAAG,IAAIN,kBAAkB,EAAE;EAKe;EAEpDO,QAAQ;IACN,IAAI,CAACF,aAAa,CAACG,aAAa,CAACC,IAAI,CAAC,IAAI,CAAC;IAC3C,IAAI,CAACC,UAAU,CAACC,YAAY,CAACC,IAAI,CAC/Bd,cAAc,CAAC,IAAI,CAAC,CACrB,CAACe,SAAS,CAACC,KAAK,IAAI,IAAI,CAACT,aAAa,CAACU,mBAAmB,CAACN,IAAI,CAACK,KAAK,CAAC,CAAC;IAExE,IAAI,CAACE,KAAK,CAACJ,IAAI,CACbb,MAAM,CAACkB,IAAI,IAAIA,IAAI,CAAC,EACpBnB,cAAc,CAAC,IAAI,CAAC,CACrB,CAACe,SAAS,CAAC,MAAM,IAAI,CAACK,KAAK,CAACC,aAAa,CAACC,KAAK,EAAE,CAAC;EACrD;EAEAC,KAAK;IACH,IAAI,CAACjB,aAAa,CAACkB,WAAW,EAAE;IAChC,IAAI,CAACZ,UAAU,CAACa,QAAQ,CAACC,SAAS,CAAC;IACnC,IAAI,CAACnB,aAAa,CAACG,aAAa,CAACC,IAAI,CAAC,KAAK,CAAC;EAC9C;EAEAgB,MAAM;IACJ,IAAI,CAACpB,aAAa,CAACqB,aAAa,CAACjB,IAAI,CAAC,IAAI,CAACC,UAAU,CAACI,KAAK,CAAC;IAC5D,IAAI,CAACO,KAAK,EAAE;EACd;EAEAM,WAAW;IACT,IAAI,CAACvB,aAAa,CAACkB,WAAW,EAAE;IAChC,IAAI,CAACZ,UAAU,CAACa,QAAQ,CAACC,SAAS,CAAC;IACnC,IAAI,CAACnB,aAAa,CAACG,aAAa,CAACC,IAAI,CAAC,KAAK,CAAC;EAC9C;;mBArCWP,MAAe;AAAA;QAAfA,MAAe;EAAA0B;EAAAC;IAAA;;;;;;;;;;;;;MCb5B5B,8BAA0E;MAArEA;QAAA,OAAgB6B,WAAO;MAAA,EAAC;;MAC3B7B,iCAIsB;MAJdA;QAAA,OAAS6B,WAAO;MAAA,EAAC;MAKvB7B,8BAAyC;MAC3CA,iBAAS;MAETA,mCAAsH;MAAlGA;QAAA,OAAe6B,YAAQ;MAAA,EAAC;MAA5C7B,iBAAsH;MACtHA,8BAAyB;MAAAA,mCAAmB;MAAAA,iBAAM;MAGpDA,gEAA0E;;;;MAb5CA,uDAA4B;MASXA,eAA0B;MAA1BA,4CAA0B;MAIjDA,eAAmB;MAAnBA,sDAAmB;;;;;;ADA9BC,eAAe,eAN3BL,YAAY,EAAE,GAMFK,eAAe,CAsC3B;SAtCYA,eAAe","names":["UntilDestroy","untilDestroyed","filter","UntypedFormControl","i0","SearchComponent","constructor","layoutService","searchService","searchOpen$","ngOnInit","isOpenSubject","next","searchCtrl","valueChanges","pipe","subscribe","value","valueChangesSubject","show$","show","input","nativeElement","focus","close","closeSearch","setValue","undefined","search","submitSubject","ngOnDestroy","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["D:\\Projects\\el-sotano-backoffice\\src\\@vex\\components\\search\\search.component.ts","D:\\Projects\\el-sotano-backoffice\\src\\@vex\\components\\search\\search.component.html"],"sourcesContent":["import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { LayoutService } from '../../services/layout.service';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { filter } from 'rxjs/operators';\nimport { UntypedFormControl } from '@angular/forms';\nimport { SearchService } from '../../services/search.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'vex-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss']\n})\nexport class SearchComponent implements OnInit, OnDestroy {\n\n  show$ = this.layoutService.searchOpen$;\n  searchCtrl = new UntypedFormControl();\n\n  @ViewChild('searchInput', { static: true }) input: ElementRef;\n\n  constructor(private layoutService: LayoutService,\n              private searchService: SearchService) { }\n\n  ngOnInit() {\n    this.searchService.isOpenSubject.next(true);\n    this.searchCtrl.valueChanges.pipe(\n      untilDestroyed(this)\n    ).subscribe(value => this.searchService.valueChangesSubject.next(value));\n\n    this.show$.pipe(\n      filter(show => show),\n      untilDestroyed(this)\n    ).subscribe(() => this.input.nativeElement.focus());\n  }\n\n  close() {\n    this.layoutService.closeSearch();\n    this.searchCtrl.setValue(undefined);\n    this.searchService.isOpenSubject.next(false);\n  }\n\n  search() {\n    this.searchService.submitSubject.next(this.searchCtrl.value);\n    this.close();\n  }\n\n  ngOnDestroy(): void {\n    this.layoutService.closeSearch();\n    this.searchCtrl.setValue(undefined);\n    this.searchService.isOpenSubject.next(false);\n  }\n}\n","<div (keyup.escape)=\"close()\" [class.show]=\"show$ | async\" class=\"search\">\n  <button (click)=\"close()\"\n          class=\"ltr:right-12 rtl:left-12 top-12 absolute\"\n          color=\"primary\"\n          mat-icon-button\n          type=\"button\">\n    <mat-icon svgIcon=\"mat:close\"></mat-icon>\n  </button>\n\n  <input #searchInput (keyup.enter)=\"search()\" [formControl]=\"searchCtrl\" class=\"search-input\" placeholder=\"Search...\"/>\n  <div class=\"search-hint\">Hit enter to search</div>\n</div>\n\n<div (click)=\"close()\" *ngIf=\"show$ | async\" class=\"search-overlay\"></div>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}