{"ast":null,"code":"import _asyncToGenerator from \"D:/Projects/el-sotano-backoffice/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { fadeInUp400ms } from 'src/@vex/animations/fade-in-up.animation';\nimport { stagger20ms } from 'src/@vex/animations/stagger.animation';\nimport { getFirestore, addDoc, collection, updateDoc, doc, getDocs, getDoc, writeBatch } from '@angular/fire/firestore';\nimport { getStorage, ref, deleteObject, getDownloadURL, uploadBytesResumable } from \"firebase/storage\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/fire/firestore\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/material/select\";\nimport * as i11 from \"@angular/material/core\";\nimport * as i12 from \"../../../../@vex/components/secondary-toolbar/secondary-toolbar.component\";\nimport * as i13 from \"../../../../@vex/components/breadcrumbs/breadcrumbs.component\";\nimport * as i14 from \"@angular/material/tabs\";\nimport * as i15 from \"ngx-dropzone\";\nimport * as i16 from \"@angular/material/slide-toggle\";\nfunction MenuCreateUpdateComponent_div_4_mat_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r5.title);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.submit());\n    });\n    i0.ɵɵtext(1, \"Guardar\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_button_15_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.addSubTab());\n    });\n    i0.ɵɵtext(1, \"A\\u00F1adir sub apartado\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r12.type.title);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 24);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_ng_template_1_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r17.title = $event);\n    })(\"input\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_ng_template_1_Template_input_input_0_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      const ctx_r24 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r24.setTitle($event, subTab_r17));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_ng_template_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const subI_r18 = i0.ɵɵnextContext().index;\n      const tab_r10 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r26.removeSubTab(subI_r18, tab_r10));\n    });\n    i0.ɵɵtext(2, \"X\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const subTab_r17 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", subTab_r17.title);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_img_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 43);\n  }\n  if (rf & 2) {\n    const i_r34 = i0.ɵɵnextContext().index;\n    const lang_r30 = i0.ɵɵnextContext().$implicit;\n    const subTab_r17 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", subTab_r17.langs[lang_r30][i_r34] == null ? null : subTab_r17.langs[lang_r30][i_r34].imageRead, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const i_r34 = restoredCtx.index;\n      const lang_r30 = i0.ɵɵnextContext().$implicit;\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      const ctx_r39 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r39.removeToTab(lang_r30, subTab_r17, i_r34));\n    });\n    i0.ɵɵelement(2, \"mat-icon\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 33)(4, \"ngx-dropzone\", 34);\n    i0.ɵɵlistener(\"change\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template_ngx_dropzone_change_4_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const i_r34 = restoredCtx.index;\n      const lang_r30 = i0.ɵɵnextContext().$implicit;\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      const ctx_r43 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r43.onSelect($event, lang_r30, i_r34, subTab_r17));\n    });\n    i0.ɵɵtemplate(5, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_img_5_Template, 1, 1, \"img\", 35);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"mat-form-field\", 36)(7, \"mat-label\");\n    i0.ɵɵtext(8, \"Titulo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"input\", 37);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_9_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const i_r34 = restoredCtx.index;\n      const lang_r30 = i0.ɵɵnextContext().$implicit;\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r17.langs[lang_r30][i_r34].title = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"mat-form-field\", 36)(11, \"mat-label\");\n    i0.ɵɵtext(12, \"Precio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_13_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const i_r34 = restoredCtx.index;\n      const lang_r30 = i0.ɵɵnextContext().$implicit;\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r17.langs[lang_r30][i_r34].price = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"mat-form-field\", 36)(15, \"mat-label\");\n    i0.ɵɵtext(16, \"Descripcion\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"input\", 39);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_17_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const i_r34 = restoredCtx.index;\n      const lang_r30 = i0.ɵɵnextContext().$implicit;\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r17.langs[lang_r30][i_r34].description = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"mat-form-field\", 36)(19, \"mat-label\");\n    i0.ɵɵtext(20, \"Precio botella\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"input\", 40);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_21_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const i_r34 = restoredCtx.index;\n      const lang_r30 = i0.ɵɵnextContext().$implicit;\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r17.langs[lang_r30][i_r34].bottlePrice = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"mat-form-field\", 36)(23, \"mat-label\");\n    i0.ɵɵtext(24, \"Precio por copa\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"input\", 41);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_25_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const i_r34 = restoredCtx.index;\n      const lang_r30 = i0.ɵɵnextContext().$implicit;\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r17.langs[lang_r30][i_r34].cupPrice = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"mat-form-field\", 36)(27, \"mat-label\");\n    i0.ɵɵtext(28, \"Origen\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"input\", 42);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_29_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const i_r34 = restoredCtx.index;\n      const lang_r30 = i0.ɵɵnextContext().$implicit;\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r17.langs[lang_r30][i_r34].origin = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const i_r34 = ctx.index;\n    const lang_r30 = i0.ɵɵnextContext().$implicit;\n    const subTab_r17 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"multiple\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (subTab_r17.langs[lang_r30][i_r34] == null ? null : subTab_r17.langs[lang_r30][i_r34].imageRead) !== null);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r17.langs[lang_r30][i_r34].title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r17.langs[lang_r30][i_r34].price);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r17.langs[lang_r30][i_r34].description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r17.langs[lang_r30][i_r34].bottlePrice);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r17.langs[lang_r30][i_r34].cupPrice);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r17.langs[lang_r30][i_r34].origin);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r68 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-tab\", 26)(1, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r68);\n      const subTab_r17 = i0.ɵɵnextContext().$implicit;\n      const tab_r10 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r66 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r66.addToTab(tab_r10, subTab_r17));\n    });\n    i0.ɵɵelement(2, \"mat-icon\", 28);\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"A\\u00F1adir\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_div_5_Template, 30, 8, \"div\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const lang_r30 = ctx.$implicit;\n    const subTab_r17 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"label\", lang_r30.toUpperCase());\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", subTab_r17.langs[lang_r30]);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab\");\n    i0.ɵɵtemplate(1, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_ng_template_1_Template, 3, 1, \"ng-template\", 21);\n    i0.ɵɵelementStart(2, \"mat-tab-group\");\n    i0.ɵɵtemplate(3, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_mat_tab_3_Template, 6, 2, \"mat-tab\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r16.langs);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab-group\");\n    i0.ɵɵtemplate(1, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_mat_tab_1_Template, 4, 1, \"mat-tab\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tab_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", tab_r10.subTabs);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r79 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 24);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_ng_template_1_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r79);\n      const subTab_r73 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r73.title = $event);\n    })(\"input\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_ng_template_1_Template_input_input_0_listener($event) {\n      i0.ɵɵrestoreView(_r79);\n      const subTab_r73 = i0.ɵɵnextContext().$implicit;\n      const ctx_r80 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r80.setTitle($event, subTab_r73));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_ng_template_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r79);\n      const subI_r74 = i0.ɵɵnextContext().index;\n      const tab_r10 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r82 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r82.removeSubTab(subI_r74, tab_r10));\n    });\n    i0.ɵɵtext(2, \"X\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const subTab_r73 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", subTab_r73.title);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_mat_tab_3_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r93 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_mat_tab_3_div_5_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r93);\n      const i_r90 = restoredCtx.index;\n      const lang_r86 = i0.ɵɵnextContext().$implicit;\n      const subTab_r73 = i0.ɵɵnextContext().$implicit;\n      const ctx_r91 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r91.removeToTab(lang_r86, subTab_r73, i_r90));\n    });\n    i0.ɵɵelement(2, \"mat-icon\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-form-field\", 36)(4, \"mat-label\");\n    i0.ɵɵtext(5, \"Titulo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"input\", 37);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_6_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r93);\n      const i_r90 = restoredCtx.index;\n      const lang_r86 = i0.ɵɵnextContext().$implicit;\n      const subTab_r73 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r73.langs[lang_r86][i_r90].title = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"mat-form-field\", 36)(8, \"mat-label\");\n    i0.ɵɵtext(9, \"Precio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_10_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r93);\n      const i_r90 = restoredCtx.index;\n      const lang_r86 = i0.ɵɵnextContext().$implicit;\n      const subTab_r73 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r73.langs[lang_r86][i_r90].price = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"mat-form-field\", 36)(12, \"mat-label\");\n    i0.ɵɵtext(13, \"Descripcion\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"input\", 39);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r93);\n      const i_r90 = restoredCtx.index;\n      const lang_r86 = i0.ɵɵnextContext().$implicit;\n      const subTab_r73 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r73.langs[lang_r86][i_r90].description = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const i_r90 = ctx.index;\n    const lang_r86 = i0.ɵɵnextContext().$implicit;\n    const subTab_r73 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", subTab_r73.langs[lang_r86][i_r90].title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r73.langs[lang_r86][i_r90].price);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r73.langs[lang_r86][i_r90].description);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_mat_tab_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r108 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-tab\", 26)(1, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_mat_tab_3_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r108);\n      const subTab_r73 = i0.ɵɵnextContext().$implicit;\n      const tab_r10 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r106 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r106.addToTab(tab_r10, subTab_r73));\n    });\n    i0.ɵɵelement(2, \"mat-icon\", 28);\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"A\\u00F1adir\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_mat_tab_3_div_5_Template, 15, 3, \"div\", 44);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const lang_r86 = ctx.$implicit;\n    const subTab_r73 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"label\", lang_r86.toUpperCase());\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", subTab_r73.langs[lang_r86]);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab\");\n    i0.ɵɵtemplate(1, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_ng_template_1_Template, 3, 1, \"ng-template\", 21);\n    i0.ɵɵelementStart(2, \"mat-tab-group\");\n    i0.ɵɵtemplate(3, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_mat_tab_3_Template, 6, 2, \"mat-tab\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r72 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r72.langs);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab-group\");\n    i0.ɵɵtemplate(1, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_mat_tab_1_Template, 4, 1, \"mat-tab\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tab_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", tab_r10.subTabs);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r119 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 24);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_ng_template_1_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r119);\n      const subTab_r113 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r113.title = $event);\n    })(\"input\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_ng_template_1_Template_input_input_0_listener($event) {\n      i0.ɵɵrestoreView(_r119);\n      const subTab_r113 = i0.ɵɵnextContext().$implicit;\n      const ctx_r120 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r120.setTitle($event, subTab_r113));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_ng_template_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r119);\n      const subI_r114 = i0.ɵɵnextContext().index;\n      const tab_r10 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r122 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r122.removeSubTab(subI_r114, tab_r10));\n    });\n    i0.ɵɵtext(2, \"X\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const subTab_r113 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", subTab_r113.title);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_mat_tab_3_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r133 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_mat_tab_3_div_5_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r133);\n      const i_r130 = restoredCtx.index;\n      const lang_r126 = i0.ɵɵnextContext().$implicit;\n      const subTab_r113 = i0.ɵɵnextContext().$implicit;\n      const ctx_r131 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r131.removeToTab(lang_r126, subTab_r113, i_r130));\n    });\n    i0.ɵɵelement(2, \"mat-icon\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-form-field\", 36)(4, \"mat-label\");\n    i0.ɵɵtext(5, \"Titulo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"input\", 37);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_6_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r133);\n      const i_r130 = restoredCtx.index;\n      const lang_r126 = i0.ɵɵnextContext().$implicit;\n      const subTab_r113 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r113.langs[lang_r126][i_r130].title = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"mat-form-field\", 36)(8, \"mat-label\");\n    i0.ɵɵtext(9, \"Precio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_10_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r133);\n      const i_r130 = restoredCtx.index;\n      const lang_r126 = i0.ɵɵnextContext().$implicit;\n      const subTab_r113 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r113.langs[lang_r126][i_r130].price = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"mat-form-field\", 36)(12, \"mat-label\");\n    i0.ɵɵtext(13, \"Descripcion\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"input\", 39);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_mat_tab_3_div_5_Template_input_ngModelChange_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r133);\n      const i_r130 = restoredCtx.index;\n      const lang_r126 = i0.ɵɵnextContext().$implicit;\n      const subTab_r113 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(subTab_r113.langs[lang_r126][i_r130].description = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const i_r130 = ctx.index;\n    const lang_r126 = i0.ɵɵnextContext().$implicit;\n    const subTab_r113 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", subTab_r113.langs[lang_r126][i_r130].title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r113.langs[lang_r126][i_r130].price);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", subTab_r113.langs[lang_r126][i_r130].description);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_mat_tab_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r148 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-tab\", 26)(1, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_mat_tab_3_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r148);\n      const subTab_r113 = i0.ɵɵnextContext().$implicit;\n      const tab_r10 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r146 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r146.addToTab(tab_r10, subTab_r113));\n    });\n    i0.ɵɵelement(2, \"mat-icon\", 28);\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"A\\u00F1adir\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_mat_tab_3_div_5_Template, 15, 3, \"div\", 44);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const lang_r126 = ctx.$implicit;\n    const subTab_r113 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"label\", lang_r126.toUpperCase());\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", subTab_r113.langs[lang_r126]);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab\");\n    i0.ɵɵtemplate(1, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_ng_template_1_Template, 3, 1, \"ng-template\", 21);\n    i0.ɵɵelementStart(2, \"mat-tab-group\");\n    i0.ɵɵtemplate(3, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_mat_tab_3_Template, 6, 2, \"mat-tab\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r112 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r112.langs);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab-group\");\n    i0.ɵɵtemplate(1, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_mat_tab_1_Template, 4, 1, \"mat-tab\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tab_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", tab_r10.subTabs);\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_mat_tab_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab\");\n    i0.ɵɵtemplate(1, MenuCreateUpdateComponent_div_4_mat_tab_17_ng_template_1_Template, 2, 1, \"ng-template\", 21);\n    i0.ɵɵtemplate(2, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_2_Template, 2, 1, \"mat-tab-group\", 22);\n    i0.ɵɵtemplate(3, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_3_Template, 2, 1, \"mat-tab-group\", 22);\n    i0.ɵɵtemplate(4, MenuCreateUpdateComponent_div_4_mat_tab_17_mat_tab_group_4_Template, 2, 1, \"mat-tab-group\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.type.type === \"vinos\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.type.type === \"comida\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.type.type === \"cocteles\");\n  }\n}\nfunction MenuCreateUpdateComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r153 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"mat-form-field\", 7)(3, \"mat-label\");\n    i0.ɵɵtext(4, \"T\\u00EDtulo para la carta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r153);\n      const ctx_r152 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r152.menuTitle = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"mat-slide-toggle\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_Template_mat_slide_toggle_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r153);\n      const ctx_r154 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r154.isActive = $event);\n    });\n    i0.ɵɵtext(7, \"\\u00BFActivar?\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 10)(9, \"mat-form-field\", 11)(10, \"mat-label\");\n    i0.ɵɵtext(11, \"Que tipo de carta quieres crear\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"mat-select\", 12);\n    i0.ɵɵlistener(\"selectionChange\", function MenuCreateUpdateComponent_div_4_Template_mat_select_selectionChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r153);\n      const ctx_r155 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r155.handleSelection($event.value));\n    })(\"ngModelChange\", function MenuCreateUpdateComponent_div_4_Template_mat_select_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r153);\n      const ctx_r156 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r156.type = $event);\n    });\n    i0.ɵɵtemplate(13, MenuCreateUpdateComponent_div_4_mat_option_13_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(14, MenuCreateUpdateComponent_div_4_button_14_Template, 2, 0, \"button\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, MenuCreateUpdateComponent_div_4_button_15_Template, 2, 0, \"button\", 15);\n    i0.ɵɵelementStart(16, \"mat-tab-group\", 16);\n    i0.ɵɵtemplate(17, MenuCreateUpdateComponent_div_4_mat_tab_17_Template, 5, 3, \"mat-tab\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@stagger\", true);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.menuTitle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.isActive);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.options);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.type !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.tabs.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getTabsByType());\n  }\n}\nconst _c0 = function () {\n  return [\"Cartas\", \"Gesti\\u00F3n de Cartas\"];\n};\nexport class MenuCreateUpdateComponent {\n  constructor(fb, firestore, matSnackBar, router, route) {\n    this.fb = fb;\n    this.firestore = firestore;\n    this.matSnackBar = matSnackBar;\n    this.router = router;\n    this.route = route;\n    this.docId = null;\n    this.type = null;\n    this.mode = 'create';\n    this.options = [];\n    this.langs = [];\n    this.menuTitle = null;\n    this.isActive = false;\n    this.loading = true;\n    this.tabs = [];\n    this.selectedTabIndex = 0;\n  }\n  ngOnInit() {\n    // Obtén el ID de la ruta.\n    this.docId = this.route.snapshot.paramMap.get('id');\n    this.getOptions();\n    //this.getLanguages();\n    if (this.docId !== null) {\n      this.mode = 'update';\n      this.type = 'comida';\n      this.getById();\n    } else {\n      this.defaults = {};\n    }\n  }\n  getLanguages() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const db = getFirestore();\n      const languagesCollection = collection(db, 'languages');\n      const languagesSnapshot = yield getDocs(languagesCollection);\n      _this.langs = languagesSnapshot.docs.map(doc => doc.data().code);\n      _this.loading = false;\n    })();\n  }\n  getOptions() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const db = getFirestore();\n      const optionsCollection = collection(db, 'options');\n      const optionsSnapshot = yield getDocs(optionsCollection);\n      _this2.options = optionsSnapshot.docs.map(doc => doc.data());\n      _this2.getLanguages();\n    })();\n  }\n  handleSelection(value) {\n    this.type = value;\n    console.log(`Tipo seleccionado: ${this.type}`);\n    const exist = this.tabs.filter(t => t?.type === this.type).length > 0;\n    if (!exist) {\n      this.addTab();\n    } else {\n      this.matSnackBar.open(\"Ya hay un apartado de este tipo de carta. Rellena los subapartados\", 'OK', {\n        duration: 3000\n      });\n    }\n  }\n  isCreateMode() {\n    return this.mode === 'create';\n  }\n  isUpdateMode() {\n    return this.mode === 'update';\n  }\n  submit() {\n    if (this.mode === 'update') {\n      this.updateMenu();\n    } else {\n      this.createMenu();\n    }\n  }\n  createMenu() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const menu = {\n          menu: _this3.tabs,\n          active: _this3.isActive\n        };\n        if (_this3.isActive) {\n          const menuRef = collection(_this3.firestore, 'menus');\n          const menuSnap = yield getDocs(menuRef);\n          const batch = writeBatch(_this3.firestore);\n          menuSnap.forEach(doc => {\n            batch.update(doc.ref, {\n              active: false\n            });\n          });\n          yield batch.commit();\n        }\n        const docRef = yield addDoc(collection(_this3.firestore, 'menus'), menu);\n        _this3.matSnackBar.open(\"El menu se ha creado correctamente\", 'CERRAR', {\n          duration: 3000\n        });\n        _this3.router.navigate(['menu']);\n      } catch (e) {\n        console.error('Error adding document: ', e);\n      }\n    })();\n  }\n  updateMenu() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (_this4.isActive) {\n          const menuRef = collection(_this4.firestore, 'menus');\n          const menuSnap = yield getDocs(menuRef);\n          const batch = writeBatch(_this4.firestore);\n          menuSnap.forEach(doc => {\n            batch.update(doc.ref, {\n              active: false\n            });\n          });\n          yield batch.commit();\n        }\n        const menuRef = doc(collection(_this4.firestore, 'menus'), _this4.docId);\n        yield updateDoc(menuRef, _this4.tabs);\n        _this4.matSnackBar.open(\"El menu se ha modificado correctamente\", 'CERRAR', {\n          duration: 3000\n        });\n        _this4.router.navigate(['menu']);\n      } catch (error) {\n        console.error('Error updating menu:', error);\n      }\n    })();\n  }\n  getById() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      if (_this5.docId) {\n        const db = getFirestore();\n        const docRef = doc(db, \"menus\", _this5.docId);\n        const docSnap = yield getDoc(docRef);\n        if (docSnap.exists()) {\n          // El documento existe.\n          _this5.tabs = docSnap.data();\n          _this5.loading = false;\n        } else {\n          // El documento no existe.\n          throw new Error(\"No document with given id\");\n        }\n      }\n    })();\n  }\n  setTitle(event, tab) {\n    tab.title = event.target.value;\n  }\n  addTab() {\n    this.tabs.push({\n      title: this.type.title,\n      subTabs: [],\n      type: this.type.type\n    });\n    this.selectedTabIndex = this.tabs.length - 1; // Cambia al índice de la nueva pestaña\n    this.addSubTab();\n  }\n  getTabsByType() {\n    const tabs = this.tabs.menu.filter(t => t.type === this.type.type);\n    return tabs.length > 0 ? tabs : [];\n  }\n  addSubTab() {\n    this.tabs[this.selectedTabIndex].subTabs.push({\n      langs: {}\n    });\n    this.langs.forEach(element => {\n      this.tabs[this.selectedTabIndex].subTabs.forEach(subT => {\n        subT.langs[element] = []; /*\r\n                                  subT.langs[element].push({\r\n                                  image: null,\r\n                                  title: '',\r\n                                  description: '',\r\n                                  bottlePrice: '',\r\n                                  cupPrice: '',\r\n                                  imageRead: '',\r\n                                  origin: ''\r\n                                  });*/\n      });\n    });\n  }\n\n  removeTab(index) {\n    this.tabs.splice(index, 1);\n    if (this.selectedTabIndex >= index) {\n      this.selectedTabIndex = Math.max(this.selectedTabIndex - 1, 0);\n    }\n  }\n  removeSubTab(index, tab) {\n    tab.subTabs.splice(index, 1);\n  }\n  addToTab(tab, subTab) {\n    this.langs.forEach(element => {\n      if (tab.type === 'vinos') {\n        subTab.langs[element].push({\n          image: null,\n          title: '',\n          description: '',\n          bottlePrice: '',\n          cupPrice: '',\n          imageRead: '',\n          origin: ''\n        });\n      } else {\n        subTab.langs[element].push({\n          title: '',\n          price: '',\n          description: ''\n        });\n      }\n    });\n  }\n  removeToTab(lang, tab, index) {\n    this.deleteImage(lang, index, tab);\n    for (const lang of this.langs) {\n      tab.langs[lang].splice(index, 1);\n    }\n  }\n  onSelect(event, lang, i, tab) {\n    if (event.addedFiles.length > 0) {\n      const file = event.addedFiles[0];\n      if (!(file instanceof File)) {\n        console.error('El archivo seleccionado no es un objeto de tipo File:', file);\n        return;\n      }\n      const storage = getStorage();\n      // Creamos un identificador único para el nombre de cada imagen.\n      const uniqueId = Math.random().toString(36).substring(2);\n      // Creamos una referencia al lugar donde queremos subir el archivo: 'images/{uniqueId}'\n      const storageRef = ref(storage, `images/${uniqueId}`);\n      // Subimos el archivo a Firebase Storage.\n      const uploadTask = uploadBytesResumable(storageRef, file);\n      // Escuchamos los cambios de estado de la subida del archivo y capturamos los datos del archivo subido.\n      uploadTask.on('state_changed', snapshot => {}, error => {\n        console.error('Error al subir el archivo:', error);\n      }, () => {\n        getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n          console.log('File available at', downloadURL);\n          tab.langs[lang][i].imageRead = downloadURL;\n          for (const lang of this.langs) {\n            tab.langs[lang][i].imageRead = downloadURL;\n          }\n        });\n      });\n    }\n  }\n  deleteImage(lang, i, tab) {\n    return _asyncToGenerator(function* () {\n      // Create a reference to the file to delete\n      const storage = getStorage();\n      const storageRef = ref(storage, tab.langs[lang][i].imageRead);\n      // Delete the file\n      try {\n        yield deleteObject(storageRef);\n        console.log('File deleted');\n      } catch (error) {\n        console.error('Error deleting file', error);\n      }\n    })();\n  }\n}\nMenuCreateUpdateComponent.id = null;\nMenuCreateUpdateComponent.ɵfac = function MenuCreateUpdateComponent_Factory(t) {\n  return new (t || MenuCreateUpdateComponent)(i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.Firestore), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n};\nMenuCreateUpdateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MenuCreateUpdateComponent,\n  selectors: [[\"vex-menu-create-update\"]],\n  decls: 5,\n  vars: 3,\n  consts: [[\"current\", \"Menu\"], [1, \"flex-auto\", 3, \"crumbs\"], [\"color\", \"primary\", \"mat-icon-button\", \"\", \"type\", \"button\", 1, \"ml-2\"], [\"svgIcon\", \"mat:more_vert\"], [\"class\", \"p-gutter container\", \"style\", \"max-width: none\", 4, \"ngIf\"], [1, \"p-gutter\", \"container\", 2, \"max-width\", \"none\"], [2, \"display\", \"flex\", \"gap\", \"20px\", \"align-items\", \"center\", \"justify-content\", \"start\"], [\"appearance\", \"fill\", 2, \"flex\", \"1\"], [\"matInput\", \"\", \"placeholder\", \"Ingrese el t\\u00EDtulo de la carta\", 3, \"ngModel\", \"ngModelChange\"], [2, \"flex\", \"1\", 3, \"ngModel\", \"ngModelChange\"], [2, \"display\", \"flex\", \"align-items\", \"center\", \"justify-content\", \"space-between\"], [\"appearance\", \"fill\", 2, \"width\", \"50%\"], [3, \"ngModel\", \"selectionChange\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"style\", \"float:right\", 3, \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"style\", \"float: left;\", 3, \"click\", 4, \"ngIf\"], [2, \"width\", \"100%\"], [4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 2, \"float\", \"right\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 2, \"float\", \"left\", 3, \"click\"], [\"mat-tab-label\", \"\"], [4, \"ngIf\"], [3, \"label\", 4, \"ngFor\", \"ngForOf\"], [\"placeholder\", \"T\\u00EDtulo de la pesta\\u00F1a\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"mat-button\", \"\", 3, \"click\"], [3, \"label\"], [\"color\", \"primary\", \"mat-raised-button\", \"\", \"type\", \"button\", 1, \"rounded-full\", 2, \"float\", \"right\", 3, \"click\"], [\"svgIcon\", \"mat:add\", 1, \"ltr:-ml-1\", \"rtl:-mr-1\", \"ltr:mr-2\", \"rtl:ml-2\"], [\"style\", \"float:left; margin: 20px 10px 0 0; width:28%;\", 4, \"ngFor\", \"ngForOf\"], [2, \"float\", \"left\", \"margin\", \"20px 10px 0 0\", \"width\", \"28%\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"svgIcon\", \"mat:delete\"], [1, \"dropzone\"], [3, \"multiple\", \"change\"], [\"alt\", \"Imagen\", 3, \"src\", 4, \"ngIf\"], [1, \"example-full-width\"], [\"matInput\", \"\", \"placeholder\", \"Nombre\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"placeholder\", \"Precio\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"placeholder\", \"Descripci\\u00F3n\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"placeholder\", \"Precio botella\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"placeholder\", \"Precio copa\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"placeholder\", \"Origen\", 3, \"ngModel\", \"ngModelChange\"], [\"alt\", \"Imagen\", 3, \"src\"], [\"style\", \"float:left; margin: 0 10px 0 0\", 4, \"ngFor\", \"ngForOf\"], [2, \"float\", \"left\", \"margin\", \"0 10px 0 0\"]],\n  template: function MenuCreateUpdateComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"vex-secondary-toolbar\", 0);\n      i0.ɵɵelement(1, \"vex-breadcrumbs\", 1);\n      i0.ɵɵelementStart(2, \"button\", 2);\n      i0.ɵɵelement(3, \"mat-icon\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(4, MenuCreateUpdateComponent_div_4_Template, 18, 8, \"div\", 4);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"crumbs\", i0.ɵɵpureFunction0(2, _c0));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n    }\n  },\n  dependencies: [i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgModel, i5.NgForOf, i5.NgIf, i6.MatInput, i7.MatFormField, i7.MatLabel, i8.MatButton, i8.MatIconButton, i9.MatIcon, i10.MatSelect, i11.MatOption, i12.SecondaryToolbarComponent, i13.BreadcrumbsComponent, i14.MatTabLabel, i14.MatTab, i14.MatTabGroup, i15.NgxDropzoneComponent, i16.MatSlideToggle],\n  styles: [\"[_nghost-%COMP%]     .dropzone ngx-dropzone-image-preview {\\n  height: 170px !important;\\n  width: 100% !important;\\n  object-fit: cover;\\n  border: 0;\\n  border-radius: 0;\\n}\\n\\n[_nghost-%COMP%]     .dropzone ngx-dropzone {\\n  height: 170px;\\n  width: 102px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  overflow-x: unset !important;\\n}\\n\\n[_nghost-%COMP%]     img {\\n  display: flex;\\n  margin: 0 !important;\\n  width: 100% !important;\\n  height: 100% !important;\\n  object-fit: cover !important;\\n}\\n\\n[_nghost-%COMP%]     ::after img {\\n  width: 100% !important;\\n  height: 100% !important;\\n  object-fit: cover !important;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbWVudS9tZW51LWNyZWF0ZS11cGRhdGUvbWVudS1jcmVhdGUtdXBkYXRlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usd0JBQUE7RUFDQSxzQkFBQTtFQUNBLGlCQUFBO0VBQ0EsU0FBQTtFQUNBLGdCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxhQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsNEJBQUE7QUFDRjs7QUFFQTtFQUdFLGFBQUE7RUFDQSxvQkFBQTtFQUlBLHNCQUFBO0VBQ0EsdUJBQUE7RUFDQSw0QkFBQTtBQUxGOztBQVFBO0VBQ0Usc0JBQUE7RUFDQSx1QkFBQTtFQUNBLDRCQUFBO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCA6Om5nLWRlZXAgLmRyb3B6b25lIG5neC1kcm9wem9uZS1pbWFnZS1wcmV2aWV3IHtcclxuICBoZWlnaHQ6IDE3MHB4ICFpbXBvcnRhbnQ7XHJcbiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcclxuICBvYmplY3QtZml0OiBjb3ZlcjtcclxuICBib3JkZXI6IDA7XHJcbiAgYm9yZGVyLXJhZGl1czogMDtcclxufVxyXG5cclxuOmhvc3QgOjpuZy1kZWVwIC5kcm9wem9uZSBuZ3gtZHJvcHpvbmUge1xyXG4gIGhlaWdodDogMTcwcHg7XHJcbiAgd2lkdGg6IDEwMnB4O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBvdmVyZmxvdy14OiB1bnNldCAhaW1wb3J0YW50O1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgaW1ne1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIG1hcmdpbjogMCAhaW1wb3J0YW50O1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgaW1nIHtcclxuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xyXG4gIGhlaWdodDogMTAwJSAhaW1wb3J0YW50O1xyXG4gIG9iamVjdC1maXQ6IGNvdmVyICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCA6OmFmdGVyIGltZyB7XHJcbiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcclxuICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcclxuICBvYmplY3QtZml0OiBjb3ZlciAhaW1wb3J0YW50O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n  data: {\n    animation: [fadeInUp400ms, stagger20ms]\n  }\n});","map":{"version":3,"mappings":"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","names":["fadeInUp400ms","stagger20ms","getFirestore","addDoc","collection","updateDoc","doc","getDocs","getDoc","writeBatch","getStorage","ref","deleteObject","getDownloadURL","uploadBytesResumable","i0","MenuCreateUpdateComponent","constructor","fb","firestore","matSnackBar","router","route","ngOnInit","docId","snapshot","paramMap","get","getOptions","mode","type","getById","defaults","getLanguages","db","languagesCollection","languagesSnapshot","langs","docs","map","data","code","loading","optionsCollection","optionsSnapshot","options","handleSelection","value","console","log","exist","tabs","filter","t","length","addTab","open","duration","isCreateMode","isUpdateMode","submit","updateMenu","createMenu","menu","active","isActive","menuRef","menuSnap","batch","forEach","update","commit","docRef","navigate","e","error","docSnap","exists","Error","setTitle","event","tab","title","target","push","subTabs","selectedTabIndex","addSubTab","getTabsByType","element","subT","removeTab","index","splice","Math","max","removeSubTab","addToTab","subTab","image","description","bottlePrice","cupPrice","imageRead","origin","price","removeToTab","lang","deleteImage","onSelect","i","addedFiles","file","File","storage","uniqueId","random","toString","substring","storageRef","uploadTask","on","then","downloadURL","id","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\Projects\\el-sotano-backoffice\\src\\app\\pages\\menu\\menu-create-update\\menu-create-update.component.ts","D:\\Projects\\el-sotano-backoffice\\src\\app\\pages\\menu\\menu-create-update\\menu-create-update.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UntypedFormBuilder, UntypedFormGroup } from '@angular/forms';\nimport { fadeInUp400ms } from 'src/@vex/animations/fade-in-up.animation';\nimport { stagger20ms } from 'src/@vex/animations/stagger.animation';\nimport { getFirestore, Firestore, addDoc, collection, updateDoc, doc, deleteDoc, getDocs, getDoc, writeBatch  } from '@angular/fire/firestore';\nimport { getStorage, ref, deleteObject, uploadString, getDownloadURL, uploadBytesResumable } from \"firebase/storage\";\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { ActivatedRoute, Router } from '@angular/router';\n\n\n@Component({\n  selector: 'vex-menu-create-update',\n  templateUrl: './menu-create-update.component.html',\n  styleUrls: ['./menu-create-update.component.scss'],\n  animations: [fadeInUp400ms, stagger20ms]\n})\nexport class MenuCreateUpdateComponent implements OnInit {\n\n  static id = null;\n  docId: any = null;;\n  type: any = null;\n\n  form: UntypedFormGroup;\n  mode: 'create' | 'update' = 'create';\n  defaults: any;\n  options: any = [];\n\n  langs: any[] = [];\n  menuTitle: string = null;\n  isActive: boolean = false;\n  loading: boolean = true;\n\n  tabs: any = [];\n  selectedTabIndex = 0;\n\n  constructor(private fb: UntypedFormBuilder, private firestore: Firestore, private matSnackBar: MatSnackBar, private router: Router, private route: ActivatedRoute) {\n  }\n\n  ngOnInit() {\n    // Obtén el ID de la ruta.\n    this.docId = this.route.snapshot.paramMap.get('id');\n    this.getOptions();\n    //this.getLanguages();\n    if (this.docId !== null) {\n      this.mode = 'update';\n      this.type = 'comida';\n      this.getById();\n    } else {\n      this.defaults = {} as any;\n\n    }\n  }\n\n\n  async getLanguages() {\n    const db = getFirestore();\n    const languagesCollection = collection(db, 'languages');\n    const languagesSnapshot = await getDocs(languagesCollection);\n    this.langs = languagesSnapshot.docs.map(doc => doc.data().code);\n    this.loading = false;\n  }\n\n\n  async getOptions() {\n    const db = getFirestore();\n    const optionsCollection = collection(db, 'options');\n    const optionsSnapshot = await getDocs(optionsCollection);\n    this.options = optionsSnapshot.docs.map(doc => doc.data());\n    this.getLanguages();\n\n  }\n\n  handleSelection(value: string) {\n    this.type = value;\n    console.log(`Tipo seleccionado: ${this.type}`);\n\n    const exist = this.tabs.filter(t => t?.type === this.type).length > 0;\n\n    if (!exist) {\n      this.addTab();\n    } else {\n      this.matSnackBar.open(\"Ya hay un apartado de este tipo de carta. Rellena los subapartados\", 'OK', {duration: 3000})\n    }\n  }\n\n\n  isCreateMode() {\n    return this.mode === 'create';\n  }\n\n  isUpdateMode() {\n    return this.mode === 'update';\n  }\n\n  submit() {\n    if (this.mode === 'update') {\n      this.updateMenu();\n    } else {\n      this.createMenu();\n    }\n  }\n\n  async createMenu() {\n    try {\n      const menu = {menu: this.tabs, active: this.isActive};\n      if (this.isActive) {\n        const menuRef = collection(this.firestore, 'menus');\n        const menuSnap = await getDocs(menuRef);\n        const batch = writeBatch(this.firestore);\n\n        menuSnap.forEach((doc) => {\n          batch.update(doc.ref, { active: false });\n        });\n\n        await batch.commit();\n      }\n      const docRef = await addDoc(collection(this.firestore, 'menus'), menu);\n      this.matSnackBar.open(\"El menu se ha creado correctamente\", 'CERRAR', {duration: 3000});\n      this.router.navigate(['menu']);\n    } catch (e) {\n      console.error('Error adding document: ', e);\n    }\n  }\n\n  async updateMenu(): Promise<void> {\n    try {\n\n      if (this.isActive) {\n        const menuRef = collection(this.firestore, 'menus');\n        const menuSnap = await getDocs(menuRef);\n        const batch = writeBatch(this.firestore);\n\n        menuSnap.forEach((doc) => {\n          batch.update(doc.ref, { active: false });\n        });\n\n        await batch.commit();\n      }\n\n      const menuRef = doc(collection(this.firestore, 'menus'), this.docId);\n      await updateDoc(menuRef, this.tabs);\n      this.matSnackBar.open(\"El menu se ha modificado correctamente\", 'CERRAR', {duration: 3000});\n      this.router.navigate(['menu']);    } catch (error) {\n      console.error('Error updating menu:', error);\n    }\n  }\n\n  async getById() {\n\n\n    if (this.docId) {\n      const db = getFirestore();\n      const docRef = doc(db, \"menus\", this.docId);\n\n      const docSnap = await getDoc(docRef);\n\n      if (docSnap.exists()) {\n        // El documento existe.\n        this.tabs = docSnap.data();\n        this.loading = false;\n      } else {\n        // El documento no existe.\n        throw new Error(\"No document with given id\");\n      }\n    }\n  }\n\n  setTitle(event, tab) {\n    tab.title = event.target.value;\n  }\n\n  addTab() {\n\n    this.tabs.push({ title: this.type.title, subTabs:[], type: this.type.type });\n    this.selectedTabIndex = this.tabs.length - 1;  // Cambia al índice de la nueva pestaña\n    this.addSubTab();\n  }\n\n  getTabsByType() {\n    const tabs = this.tabs.menu.filter(t => t.type === this.type.type);\n    return tabs.length > 0 ? tabs : [];\n  }\n\n  addSubTab() {\n\n    this.tabs[this.selectedTabIndex].subTabs.push({ langs: {} });\n\n    this.langs.forEach(element => {\n\n      this.tabs[this.selectedTabIndex].subTabs.forEach(subT => {\n        subT.langs[element] = [];/*\n          subT.langs[element].push({\n            image: null,\n            title: '',\n            description: '',\n            bottlePrice: '',\n            cupPrice: '',\n            imageRead: '',\n            origin: ''\n          });*/\n      });\n    });\n  }\n\n  removeTab(index: number) {\n    this.tabs.splice(index, 1);\n    if (this.selectedTabIndex >= index) {\n      this.selectedTabIndex = Math.max(this.selectedTabIndex - 1, 0);\n    }\n  }\n\n  removeSubTab(index: number, tab) {\n    tab.subTabs.splice(index, 1);\n  }\n\n  addToTab(tab: any, subTab: any) {\n    this.langs.forEach(element => {\n\n      if (tab.type === 'vinos') {\n        subTab.langs[element].push({\n          image: null,\n          title: '',\n          description: '',\n          bottlePrice: '',\n          cupPrice: '',\n          imageRead: '',\n          origin: ''\n        })\n      } else {\n\n        subTab.langs[element].push({\n          title: '',\n          price: '',\n          description: ''\n        });\n      }\n    });\n  }\n\n  removeToTab(lang: string, tab: any, index: number) {\n\n    this.deleteImage(lang, index, tab);\n    for (const lang of this.langs) {\n      tab.langs[lang].splice(index, 1);\n    }\n  }\n\n  onSelect(event, lang: string, i: number, tab: any) {\n    if (event.addedFiles.length > 0) {\n      const file = event.addedFiles[0];\n      if (!(file instanceof File)) {\n        console.error('El archivo seleccionado no es un objeto de tipo File:', file);\n        return;\n      }\n      const storage = getStorage();\n\n      // Creamos un identificador único para el nombre de cada imagen.\n      const uniqueId = Math.random().toString(36).substring(2);\n\n      // Creamos una referencia al lugar donde queremos subir el archivo: 'images/{uniqueId}'\n      const storageRef = ref(storage, `images/${uniqueId}`);\n\n      // Subimos el archivo a Firebase Storage.\n      const uploadTask = uploadBytesResumable(storageRef, file);\n\n      // Escuchamos los cambios de estado de la subida del archivo y capturamos los datos del archivo subido.\n      uploadTask.on('state_changed',\n        (snapshot) => {},\n        (error) => {\n          console.error('Error al subir el archivo:', error);\n        },\n        () => {\n          getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n            console.log('File available at', downloadURL);\n            tab.langs[lang][i].imageRead = downloadURL;\n\n            for (const lang of this.langs) {\n              tab.langs[lang][i].imageRead = downloadURL;\n            }\n          });\n        }\n      );\n    }\n  }\n\n  async deleteImage(lang: string, i: number, tab: any) {\n    // Create a reference to the file to delete\n    const storage = getStorage();\n    const storageRef = ref(storage, tab.langs[lang][i].imageRead);\n\n    // Delete the file\n    try {\n      await deleteObject(storageRef);\n      console.log('File deleted');\n    } catch(error) {\n      console.error('Error deleting file', error);\n    }\n  }\n}\n","\n<vex-secondary-toolbar current=\"Menu\">\n  <vex-breadcrumbs [crumbs]=\"['Cartas', 'Gestión de Cartas']\" class=\"flex-auto\"></vex-breadcrumbs>\n\n  <button class=\"ml-2\" color=\"primary\" mat-icon-button type=\"button\">\n    <mat-icon svgIcon=\"mat:more_vert\"></mat-icon>\n  </button>\n</vex-secondary-toolbar>\n<div [@stagger]=\"true\" class=\"p-gutter container\" style=\"max-width: none\" *ngIf=\"!loading\">\n\n  <!-- Contenedor Flexbox para alinear los elementos horizontalmente -->\n  <div style=\"display: flex; gap: 20px; align-items: center; justify-content: start;\">\n    <!-- Input para el título -->\n    <mat-form-field appearance=\"fill\" style=\"flex: 1;\">\n      <mat-label>Título para la carta</mat-label>\n      <input matInput placeholder=\"Ingrese el título de la carta\" [(ngModel)]=\"menuTitle\">\n    </mat-form-field>\n\n    <!-- Toggle para el atributo 'active' -->\n    <mat-slide-toggle style=\"flex: 1;\" [(ngModel)]=\"isActive\">¿Activar?</mat-slide-toggle>\n\n  </div>\n\n  <div style=\"display: flex; align-items: center; justify-content: space-between;\">\n    <mat-form-field appearance=\"fill\" style=\"width: 50%\">\n      <mat-label>Que tipo de carta quieres crear</mat-label>\n      <mat-select (selectionChange)=\"handleSelection($event.value)\" [(ngModel)]=\"type\">\n        <mat-option *ngFor=\"let item of options\" [value]=\"item\">{{item.title}}</mat-option>\n      </mat-select>\n    </mat-form-field>\n    <button mat-raised-button color=\"primary\" style=\"float:right\" *ngIf=\"type !== null\" (click)=\"submit()\">Guardar</button>\n  </div>\n\n\n<!--<button *ngIf=\"type!==null\" mat-raised-button color=\"primary\" (click)=\"addTab()\" style=\"float: left;\">Añadir</button>-->\n<button *ngIf=\"tabs.length > 0\" mat-raised-button color=\"primary\" (click)=\"addSubTab()\" style=\"float: left;\">Añadir sub apartado</button>\n\n  <mat-tab-group style=\"width:100%\">\n\n    <mat-tab *ngFor=\"let tab of getTabsByType(); let idx = index\">\n      <ng-template mat-tab-label>\n        <!--<input [(ngModel)]=\"tab.title\" placeholder=\"Título de la pestaña\" [value]=\"type.title\" readonly=\"readonly\">\n        <button mat-button (click)=\"removeTab(idx)\">X</button>\n        -->\n        <p>{{ type.title }}</p>\n\n      </ng-template>\n      <!-- Aquí va el contenido de tu pestaña, como los elementos del menú -->\n\n      <mat-tab-group *ngIf=\"type.type === 'vinos'\">\n        <mat-tab *ngFor=\"let subTab of tab.subTabs; let subI = index\">\n          <ng-template mat-tab-label>\n            <input [(ngModel)]=\"subTab.title\" placeholder=\"Título de la pestaña\" (input)=\"setTitle($event, subTab)\">\n            <button mat-button (click)=\"removeSubTab(subI, tab)\">X</button>\n          </ng-template>\n          <mat-tab-group>\n            <mat-tab *ngFor=\"let lang of langs; let i = index\" label=\"{{lang.toUpperCase()}}\" >\n\n              <button class=\"rounded-full\" color=\"primary\" mat-raised-button type=\"button\" (click)=\"addToTab(tab, subTab)\" style=\"float:right\">\n                <mat-icon class=\"ltr:-ml-1 rtl:-mr-1 ltr:mr-2 rtl:ml-2\"\n                          svgIcon=\"mat:add\"></mat-icon>\n                <span>Añadir</span>\n              </button>\n\n              <div *ngFor=\"let item of subTab.langs[lang]; let i = index\" style=\"float:left; margin: 20px 10px 0 0; width:28%;\">\n                <button mat-icon-button color=\"warn\" (click)=\"removeToTab(lang, subTab, i)\">\n                  <mat-icon svgIcon=\"mat:delete\"></mat-icon>\n                </button>\n\n                <div class=\"dropzone\">\n                  <ngx-dropzone [multiple]=\"false\" (change)=\"onSelect($event, lang, i, subTab)\">\n                    <img *ngIf=\"subTab.langs[lang][i]?.imageRead !== null\" [src]=\"subTab.langs[lang][i]?.imageRead\" alt=\"Imagen\">\n                  </ngx-dropzone>\n                </div>\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Titulo</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].title\" placeholder=\"Nombre\">\n                </mat-form-field>\n\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Precio</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].price\" placeholder=\"Precio\">\n                </mat-form-field>\n\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Descripcion</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].description\" placeholder=\"Descripción\">\n                </mat-form-field>\n\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Precio botella</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].bottlePrice\" placeholder=\"Precio botella\">\n                </mat-form-field>\n\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Precio por copa</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].cupPrice\" placeholder=\"Precio copa\">\n                </mat-form-field>\n\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Origen</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].origin\" placeholder=\"Origen\">\n                </mat-form-field>\n              </div>\n            </mat-tab>\n          </mat-tab-group>\n        </mat-tab>\n      </mat-tab-group>\n\n      <mat-tab-group *ngIf=\"type.type === 'comida'\">\n        <mat-tab *ngFor=\"let subTab of tab.subTabs; let subI = index\">\n          <ng-template mat-tab-label>\n            <input [(ngModel)]=\"subTab.title\" placeholder=\"Título de la pestaña\" (input)=\"setTitle($event, subTab)\">\n            <button mat-button (click)=\"removeSubTab(subI, tab)\">X</button>\n          </ng-template>\n          <mat-tab-group>\n            <mat-tab *ngFor=\"let lang of langs; let i = index\" label=\"{{lang.toUpperCase()}}\" >\n\n              <button class=\"rounded-full\" color=\"primary\" mat-raised-button type=\"button\" (click)=\"addToTab(tab, subTab)\" style=\"float:right\">\n                <mat-icon class=\"ltr:-ml-1 rtl:-mr-1 ltr:mr-2 rtl:ml-2\"\n                          svgIcon=\"mat:add\"></mat-icon>\n                <span>Añadir</span>\n              </button>\n\n              <div *ngFor=\"let item of subTab.langs[lang]; let i = index\" style=\"float:left; margin: 0 10px 0 0\">\n                <button mat-icon-button color=\"warn\" (click)=\"removeToTab(lang, subTab, i)\">\n                  <mat-icon svgIcon=\"mat:delete\"></mat-icon>\n                </button>\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Titulo</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].title\" placeholder=\"Nombre\">\n                </mat-form-field>\n\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Precio</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].price\" placeholder=\"Precio\">\n                </mat-form-field>\n\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Descripcion</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].description\" placeholder=\"Descripción\">\n                </mat-form-field>\n              </div>\n            </mat-tab>\n          </mat-tab-group>\n        </mat-tab>\n      </mat-tab-group>\n\n      <mat-tab-group *ngIf=\"type.type === 'cocteles'\">\n        <mat-tab *ngFor=\"let subTab of tab.subTabs; let subI = index\">\n          <ng-template mat-tab-label>\n            <input [(ngModel)]=\"subTab.title\" placeholder=\"Título de la pestaña\" (input)=\"setTitle($event, subTab)\">\n            <button mat-button (click)=\"removeSubTab(subI, tab)\">X</button>\n          </ng-template>\n          <mat-tab-group>\n            <mat-tab *ngFor=\"let lang of langs; let i = index\" label=\"{{lang.toUpperCase()}}\" >\n\n              <button class=\"rounded-full\" color=\"primary\" mat-raised-button type=\"button\" (click)=\"addToTab(tab, subTab)\" style=\"float:right\">\n                <mat-icon class=\"ltr:-ml-1 rtl:-mr-1 ltr:mr-2 rtl:ml-2\"\n                          svgIcon=\"mat:add\"></mat-icon>\n                <span>Añadir</span>\n              </button>\n\n              <div *ngFor=\"let item of subTab.langs[lang]; let i = index\" style=\"float:left; margin: 0 10px 0 0\">\n                <button mat-icon-button color=\"warn\" (click)=\"removeToTab(lang, subTab, i)\">\n                  <mat-icon svgIcon=\"mat:delete\"></mat-icon>\n                </button>\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Titulo</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].title\" placeholder=\"Nombre\">\n                </mat-form-field>\n\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Precio</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].price\" placeholder=\"Precio\">\n                </mat-form-field>\n\n                <mat-form-field class=\"example-full-width\">\n                  <mat-label>Descripcion</mat-label>\n                  <input matInput [(ngModel)]=\"subTab.langs[lang][i].description\" placeholder=\"Descripción\">\n                </mat-form-field>\n              </div>\n            </mat-tab>\n          </mat-tab-group>\n        </mat-tab>\n      </mat-tab-group>\n    </mat-tab>\n  </mat-tab-group>\n\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}