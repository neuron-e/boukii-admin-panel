{"ast":null,"code":"import _asyncToGenerator from \"D:/Projects/el-sotano-backoffice/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { getFirestore } from '@angular/fire/firestore';\nimport { addDoc, doc, getDoc, updateDoc, collection } from 'firebase/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/snack-bar\";\nimport * as i2 from \"@angular/router\";\nexport class CrudService {\n  constructor(matSnackBar, router) {\n    this.matSnackBar = matSnackBar;\n    this.router = router;\n  }\n  getLangById(id, model) {\n    return _asyncToGenerator(function* () {\n      const db = getFirestore();\n      const langRef = doc(db, model, id);\n      const langSnap = yield getDoc(langRef);\n      if (langSnap.exists()) {\n        return langSnap.data();\n      } else {\n        console.log('No such document!');\n      }\n    })();\n  }\n  createLang(data, model) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const db = getFirestore();\n      try {\n        yield addDoc(collection(db, model), data);\n        _this.matSnackBar.open(\"El registro se ha creado correctamente\", 'CERRAR', {\n          duration: 3000\n        });\n        _this.router.navigate(['language']);\n      } catch (error) {\n        console.error('Error creating language:', error);\n      }\n    })();\n  }\n  updateLang(id, data, model) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const db = getFirestore();\n      try {\n        const langRef = doc(db, model, id);\n        yield updateDoc(langRef, data);\n        _this2.matSnackBar.open(\"El registro se ha modificado correctamente\", 'CERRAR', {\n          duration: 3000\n        });\n        _this2.router.navigate(['language']);\n        console.log('Language updated successfully');\n      } catch (error) {\n        console.error('Error updating language:', error);\n      }\n    })();\n  }\n}\nCrudService.ɵfac = function CrudService_Factory(t) {\n  return new (t || CrudService)(i0.ɵɵinject(i1.MatSnackBar), i0.ɵɵinject(i2.Router));\n};\nCrudService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CrudService,\n  factory: CrudService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AACA,SAASA,YAAY,QAAQ,yBAAyB;AAGtD,SAASC,MAAM,EAAEC,GAAG,EAAEC,MAAM,EAAEC,SAAS,EAAEC,UAAU,QAAQ,oBAAoB;;;;AAK/E,OAAM,MAAOC,WAAW;EACtBC,YAAoBC,WAAwB,EAAUC,MAAc;IAAhD,gBAAW,GAAXD,WAAW;IAAuB,WAAM,GAANC,MAAM;EAAY;EAElEC,WAAW,CAACC,EAAU,EAAEC,KAAa;IAAA;MACzC,MAAMC,EAAE,GAAGb,YAAY,EAAE;MAEzB,MAAMc,OAAO,GAAGZ,GAAG,CAACW,EAAE,EAAED,KAAK,EAAED,EAAE,CAAC;MAClC,MAAMI,QAAQ,SAASZ,MAAM,CAACW,OAAO,CAAC;MAEtC,IAAIC,QAAQ,CAACC,MAAM,EAAE,EAAE;QACrB,OAAOD,QAAQ,CAACE,IAAI,EAAE;OACvB,MAAM;QACLC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;;IACjC;EACH;EAEMC,UAAU,CAACH,IAAS,EAAEL,KAAa;IAAA;IAAA;MACvC,MAAMC,EAAE,GAAGb,YAAY,EAAE;MAEzB,IAAI;QACF,MAAMC,MAAM,CAACI,UAAU,CAACQ,EAAE,EAAED,KAAK,CAAC,EAAEK,IAAI,CAAC;QAEzC,KAAI,CAACT,WAAW,CAACa,IAAI,CAAC,wCAAwC,EAAE,QAAQ,EAAE;UAACC,QAAQ,EAAE;QAAI,CAAC,CAAC;QAC3F,KAAI,CAACb,MAAM,CAACc,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;OACnC,CAAC,OAAOC,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;;IACjD;EACH;EAEMC,UAAU,CAACd,EAAU,EAAEM,IAAS,EAAEL,KAAa;IAAA;IAAA;MACnD,MAAMC,EAAE,GAAGb,YAAY,EAAE;MAEzB,IAAI;QACF,MAAMc,OAAO,GAAGZ,GAAG,CAACW,EAAE,EAAED,KAAK,EAAED,EAAE,CAAC;QAClC,MAAMP,SAAS,CAACU,OAAO,EAAEG,IAAI,CAAC;QAE9B,MAAI,CAACT,WAAW,CAACa,IAAI,CAAC,4CAA4C,EAAE,QAAQ,EAAE;UAACC,QAAQ,EAAE;QAAI,CAAC,CAAC;QAC/F,MAAI,CAACb,MAAM,CAACc,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;QAClCL,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;OAC7C,CAAC,OAAOK,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;;IACjD;EACH;;AA1CWlB,WAAW;mBAAXA,WAAW;AAAA;AAAXA,WAAW;SAAXA,WAAW;EAAAoB,SAAXpB,WAAW;EAAAqB,YAFV;AAAM","names":["getFirestore","addDoc","doc","getDoc","updateDoc","collection","CrudService","constructor","matSnackBar","router","getLangById","id","model","db","langRef","langSnap","exists","data","console","log","createLang","open","duration","navigate","error","updateLang","factory","providedIn"],"sourceRoot":"","sources":["D:\\Projects\\el-sotano-backoffice\\src\\service\\crudService.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { getFirestore } from '@angular/fire/firestore';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Router } from '@angular/router';\r\nimport { addDoc, doc, getDoc, updateDoc, collection } from 'firebase/firestore';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CrudService {\r\n  constructor(private matSnackBar: MatSnackBar, private router: Router) { }\r\n\r\n  async getLangById(id: string, model: string) {\r\n    const db = getFirestore();\r\n\r\n    const langRef = doc(db, model, id);\r\n    const langSnap = await getDoc(langRef);\r\n\r\n    if (langSnap.exists()) {\r\n      return langSnap.data();\r\n    } else {\r\n      console.log('No such document!');\r\n    }\r\n  }\r\n\r\n  async createLang(data: any, model: string) {\r\n    const db = getFirestore();\r\n\r\n    try {\r\n      await addDoc(collection(db, model), data);\r\n\r\n      this.matSnackBar.open(\"El registro se ha creado correctamente\", 'CERRAR', {duration: 3000});\r\n      this.router.navigate(['language']);\r\n    } catch (error) {\r\n      console.error('Error creating language:', error);\r\n    }\r\n  }\r\n\r\n  async updateLang(id: string, data: any, model: string) {\r\n    const db = getFirestore();\r\n\r\n    try {\r\n      const langRef = doc(db, model, id);\r\n      await updateDoc(langRef, data);\r\n\r\n      this.matSnackBar.open(\"El registro se ha modificado correctamente\", 'CERRAR', {duration: 3000});\r\n      this.router.navigate(['language']);\r\n      console.log('Language updated successfully');\r\n    } catch (error) {\r\n      console.error('Error updating language:', error);\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}